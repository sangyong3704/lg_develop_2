<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ì„±ì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    
    <!-- í°íŠ¸: Noto Sans KR -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* [ë””ìì¸ ì‹œìŠ¤í…œ] */
        :root {
            --color-magenta: #D7177B;
            --color-purple: #551D83;
            --color-lightblue: #70C0E6;
            --color-teal: #008785;
            --color-bg-gray: #F5F5F5;
            --sidebar-width: 260px;
            --header-height: 64px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--color-bg-gray);
            color: #333;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* 1. í—¤ë” */
        header {
            background: linear-gradient(90deg, var(--color-purple) 0%, var(--color-magenta) 100%);
            color: #fff;
            padding: 0 32px;
            height: var(--header-height);
            display: flex; align-items: center; justify-content: space-between;
            flex-shrink: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo-area { text-decoration: none; color: #fff; font-size: 22px; font-weight: 700; letter-spacing: -0.5px; cursor: pointer; }
        
        .search-box {
            background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
            border-radius: 20px; padding: 8px 20px; color: #fff; outline: none; width: 280px; font-size: 14px;
        }
        .search-box:focus { background: rgba(255,255,255,0.35); }
        .search-box::placeholder { color: rgba(255,255,255,0.8); }

        /* 2. ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .app-container {
            display: flex; flex: 1; height: calc(100vh - var(--header-height));
        }

        /* 3. ì‚¬ì´ë“œë°” */
        .sidebar {
            width: var(--sidebar-width); background: #fff; border-right: 1px solid #e0e0e0;
            display: flex; flex-direction: column; overflow-y: auto;
        }
        .sidebar-header { padding: 24px 20px 10px; font-size: 14px; font-weight: 700; color: #888; text-transform: uppercase; }
        .member-item {
            display: flex; align-items: center; gap: 12px; padding: 14px 24px; cursor: pointer; transition: all 0.2s;
            border-left: 4px solid transparent;
        }
        .member-item:hover { background: #f9f9f9; }
        .member-item.active { background: #f4eff9; border-left-color: var(--color-purple); }
        .m-avatar { 
            width: 36px; height: 36px; border-radius: 50%; background: #eee; 
            display: flex; align-items: center; justify-content: center; font-size: 18px; 
            border: 1px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .m-info { display: flex; flex-direction: column; line-height: 1.3; }
        .m-name { font-size: 14px; font-weight: 700; color: #333; }
        .m-job { font-size: 12px; color: #888; }
        .member-item.active .m-name { color: var(--color-purple); }

        /* 4. ì»¨í…ì¸  ì˜ì—­ */
        .content-wrapper {
            flex: 1; position: relative; background-color: var(--color-bg-gray);
            overflow: hidden; display: flex; flex-direction: column;
        }

        /* ì´ˆê¸°í™”ë©´ */
        .empty-state {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #999; z-index: 10; background: var(--color-bg-gray);
        }
        .empty-icon { font-size: 60px; margin-bottom: 20px; opacity: 0.5; }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            display: none; flex-direction: column; height: 100%; overflow-y: auto;
        }
        .main-content.active { display: flex; }

        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .nav-tabs-container {
            background: #fff; padding: 0 40px; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 20;
        }
        .nav-tabs { display: flex; justify-content: center; gap: 60px; list-style: none; }
        .tab-link {
            display: block; padding: 16px 10px; color: #999;
            text-decoration: none; font-size: 16px; font-weight: 500; cursor: pointer;
        }
        .tab-item.active .tab-link { color: var(--color-purple); font-weight: 700; border-bottom: 3px solid var(--color-purple); }

        .tab-content-area { padding: 40px; max-width: 1200px; width: 100%; margin: 0 auto; }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: #fff; border-radius: 16px; padding: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); border: 1px solid #eee;
            height: 100%; display: flex; flex-direction: column;
        }
        .card-head { 
            font-size: 17px; font-weight: 700; color: #333; margin-bottom: 20px; 
            padding-bottom: 12px; border-bottom: 1px solid #f5f5f5; 
        }

        /* ê·¸ë¦¬ë“œ */
        .grid-dashboard { display: grid; grid-template-columns: 300px 1fr 1fr; gap: 24px; margin-bottom: 24px; }
        .grid-2-col { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px; }

        /* [TAB 1] ê¸°ë³¸ì •ë³´ ìŠ¤íƒ€ì¼ */
        .profile-summary { text-align: center; margin-bottom: 20px; }
        .profile-img-lg {
            width: 100px; height: 100px; background: linear-gradient(135deg, #e0e0e0, #bdbdbd);
            border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;
            font-size: 40px; border: 4px solid #fff; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .profile-name-lg { font-size: 24px; font-weight: 700; color: #333; margin-bottom: 6px; }
        .profile-job-lg { font-size: 15px; color: #666; font-weight: 500; margin-bottom: 16px; }
        .keyword-box { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; margin-bottom: 24px; }
        .keyword { padding: 4px 10px; border-radius: 12px; font-size: 12px; background: #f0f4f8; color: #555; }
        .info-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f9f9f9; font-size: 14px; }
        .info-label { color: #888; } .info-value { font-weight: 600; color: #333; }

        .skill-row { margin-bottom: 12px; font-size: 14px; }
        .skill-meta { display: flex; justify-content: space-between; margin-bottom: 6px; font-weight: 500; }
        .progress-track { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 4px; transition: width 0.5s ease; }

        .swot-item { font-size: 12px; padding: 8px; border-radius: 6px; background: #fcfcfc; border: 1px solid #eee; margin-bottom: 6px;}
        .timeline { position: relative; padding-left: 16px; }
        .timeline::before { content: ''; position: absolute; left: 5px; top: 6px; bottom: 0; width: 2px; background: #eee; }
        .timeline-item { position: relative; padding-bottom: 20px; padding-left: 16px; }
        .timeline-dot { position: absolute; left: -16px; top: 0; width: 10px; height: 10px; background: #fff; border: 3px solid var(--color-purple); border-radius: 50%; z-index: 1; }
        .timeline-date { font-size: 12px; font-weight: 700; color: var(--color-purple); }
        .timeline-content { font-size: 13px; font-weight: 500; margin-top: 2px; }
        
        /* [TAB 2] ì„±ê³¼ & ìœ¡ì„± */
        .eval-summary-card {
            background: linear-gradient(135deg, #333 0%, #444 100%);
            color: #fff; border-radius: 16px; padding: 24px 32px;
            display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        .eval-info { display: flex; gap: 40px; align-items: center; }
        .eval-item { display: flex; flex-direction: column; min-width: 100px; }
        .eval-label { font-size: 12px; opacity: 0.7; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .eval-value { font-size: 28px; font-weight: 700; }
        .eval-sub { font-size: 13px; color: var(--color-teal); font-weight: 500; }
        .eval-sub.kpi { color: var(--color-magenta); }
        .eval-grade { font-size: 42px; font-weight: 900; color: #fff; line-height: 1; text-shadow: 0 0 10px rgba(215, 23, 123, 0.5); }

        .cv-item { margin-bottom: 14px; font-size: 13px; }
        .cv-header { display: flex; justify-content: space-between; margin-bottom: 4px; }
        .cv-name { font-weight: 500; }
        .cv-val { font-weight: 700; color: var(--color-teal); }
        .cv-bar-bg { width: 100%; height: 6px; background: #eee; border-radius: 3px; overflow: hidden; }
        .cv-bar-fill { height: 100%; background: var(--color-teal); border-radius: 3px; }

        .kpi-wrapper { display: flex; align-items: center; justify-content: center; gap: 30px; height: 100%; }
        .donut-chart { position: relative; width: 120px; height: 120px; }
        .donut-bg { fill: none; stroke: #f0f0f0; stroke-width: 12; }
        .donut-fg { 
            fill: none; stroke: var(--color-purple); stroke-width: 12; stroke-linecap: round;
            stroke-dasharray: 377; stroke-dashoffset: 377; transform: rotate(-90deg); transform-origin: 50% 50%; transition: stroke-dashoffset 1s ease-out;
        }
        .donut-val { font-size: 24px; font-weight: 700; color: var(--color-purple); position: absolute; top:50%; left:50%; transform:translate(-50%, -50%); }
        .kpi-desc { font-size: 13px; color: #666; line-height: 1.6; flex: 1; }

        .section-title { font-size: 18px; font-weight: 700; color: #333; margin: 40px 0 20px; display: flex; align-items: center; gap: 8px;}
        .section-badge { background: var(--color-teal); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .c-node { text-align: center; }
        .c-role { font-size: 15px; font-weight: 700; color: #333; }
        .c-node.future .c-role { color: var(--color-purple); }

        .goal-li { position: relative; padding-left: 14px; font-size: 13px; color: #555; margin-bottom: 6px; }
        .goal-li::before { content: 'â€¢'; position: absolute; left: 0; color: #ccc; }

        /* [TAB 3] ì „ë‹¬ (NEW CSS) */
        .fb-section { margin-bottom: 32px; animation: fadeIn 0.3s; }
        .fb-label { display: block; font-size: 14px; font-weight: 700; color: #444; margin-bottom: 8px; }
        .fb-desc { font-size: 12px; color: #888; margin-bottom: 12px; }
        
        .fb-input-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 16px; }
        .fb-input-card { background: #fff; border: 1px solid #eee; border-radius: 12px; padding: 16px; }
        .fb-input-head { font-size: 14px; font-weight: 700; color: var(--color-purple); margin-bottom: 10px; }
        .fb-textarea { width: 100%; height: 100px; border: 1px solid #ddd; border-radius: 8px; padding: 10px; font-size: 13px; resize: none; outline: none; transition: 0.2s; }
        .fb-textarea:focus { border-color: var(--color-purple); background: #fdfaff; }

        .btn-primary { 
            background: var(--color-purple); color: #fff; border: none; padding: 12px 24px; 
            border-radius: 8px; font-size: 14px; font-weight: 700; cursor: pointer; transition: 0.2s; 
            display: inline-flex; align-items: center; gap: 6px;
        }
        .btn-primary:hover { background: #4a1575; }
        .btn-secondary {
            background: #fff; color: #555; border: 1px solid #ddd; padding: 8px 16px;
            border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer;
        }
        .btn-secondary:hover { background: #f5f5f5; }

        /* Evidence Section */
        .evidence-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .evidence-box { 
            background: #fbfbfb; border: 1px solid #eee; border-radius: 12px; padding: 16px; 
            position: relative; transition: all 0.2s;
        }
        /* ì„ íƒëœ ê·¼ê±° ìŠ¤íƒ€ì¼ */
        .evidence-box.selected {
            background: #f4eff9; border-color: var(--color-purple); box-shadow: 0 4px 10px rgba(85,29,131,0.1);
        }
        .evidence-box.selected::after {
            content: 'âœ” ì„ íƒë¨'; position: absolute; top: -10px; right: 10px; 
            background: var(--color-purple); color: #fff; font-size: 11px; padding: 2px 8px; border-radius: 12px;
        }

        .evidence-title { font-size: 13px; font-weight: 700; color: #555; margin-bottom: 10px; }
        .evidence-content { font-size: 13px; color: #333; line-height: 1.6; min-height: 60px; word-break: keep-all; }
        .evidence-controls { display: flex; justify-content: flex-end; gap: 6px; margin-top: 10px; border-top: 1px dashed #eee; padding-top: 8px; }
        .btn-xs { 
            padding: 4px 8px; font-size: 11px; border-radius: 4px; border: 1px solid #ddd; 
            background: #fff; cursor: pointer; color: #666; transition: 0.2s;
        }
        .btn-xs:hover { background: #eee; }
        .btn-select { background: var(--color-bg-gray); color: var(--color-purple); border-color: var(--color-purple); font-weight: 700; }
        .evidence-box.selected .btn-select { background: var(--color-purple); color: #fff; }

        /* Tone Section */
        .tone-container { display: flex; gap: 24px; padding: 20px; background: #fff; border: 1px solid #eee; border-radius: 12px; align-items: center; justify-content: space-between; }
        .tone-group { display: flex; flex-direction: column; gap: 8px; flex: 1; }
        .tone-label { font-size: 13px; font-weight: 700; color: #444; }
        .tone-options { display: flex; background: #f5f5f5; padding: 4px; border-radius: 8px; }
        .tone-option { 
            flex: 1; text-align: center; font-size: 12px; padding: 8px 0; cursor: pointer; 
            border-radius: 6px; color: #888; font-weight: 500; transition: 0.2s; 
        }
        .tone-option.selected { background: #fff; color: var(--color-purple); box-shadow: 0 2px 4px rgba(0,0,0,0.05); font-weight: 700; }

        /* Final Preview */
        .final-box { background: #fff; border: 1px solid var(--color-purple); border-radius: 12px; padding: 24px; min-height: 150px; }
        .final-text { width: 100%; border: none; outline: none; font-size: 15px; line-height: 1.8; color: #333; resize: none; height: 160px; font-family: 'Noto Sans KR', sans-serif; }
        .action-row { display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; }

        /* íƒ­ ì „í™˜ */
        .tab-content { display: none; animation: fadeIn 0.3s ease-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <!-- 1. í—¤ë” -->
    <header>
        <a onclick="resetView()" class="logo-area">LG Chem</a>
        <input type="text" id="member-search" class="search-box" placeholder="ì´ë¦„, ë¶€ì„œ ê²€ìƒ‰">
    </header>

    <div class="app-container">
        
        <!-- 2. ì‚¬ì´ë“œë°” -->
        <aside class="sidebar">
            <div class="sidebar-header">My Team (5)</div>
            <div id="member-list" class="member-list"></div>
        </aside>

        <!-- 3. ì»¨í…ì¸  ì˜ì—­ -->
        <div class="content-wrapper">
            
            <!-- [ì´ˆê¸° ìƒíƒœ] Empty State -->
            <div id="empty-state" class="empty-state">
                <div class="empty-icon">ğŸ‘¥</div>
                <h3>íŒ€ì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                <p>ì™¼ìª½ ëª©ë¡ì—ì„œ íŒ€ì›ì„ ì„ íƒí•˜ë©´<br>í†µí•© ì¸ì‚¬ì´íŠ¸ í”„ë¡œí•„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <!-- [ë©”ì¸ ìƒíƒœ] ìƒì„¸ ì •ë³´ -->
            <div id="main-content" class="main-content">
                
                <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                <nav class="nav-tabs-container">
                    <ul class="nav-tabs">
                        <li class="tab-item active" onclick="switchTab('basic', this)"><a class="tab-link">ê¸°ë³¸ì •ë³´</a></li>
                        <li class="tab-item" onclick="switchTab('perf', this)"><a class="tab-link">ì„±ê³¼ & ìœ¡ì„±</a></li>
                        <li class="tab-item" onclick="switchTab('feedback', this)"><a class="tab-link">ì „ë‹¬</a></li>
                    </ul>
                </nav>

                <div class="tab-content-area">
                    
                    <!-- [TAB 1] ê¸°ë³¸ì •ë³´ -->
                    <div id="tab-basic" class="tab-content active">
                        <div class="grid-dashboard">
                            <!-- í”„ë¡œí•„ -->
                            <div class="card profile-card" style="grid-row: span 2;">
                                <div class="card-head">í”„ë¡œí•„ ìš”ì•½</div>
                                <div class="profile-summary">
                                    <div class="profile-img-lg" id="p-avatar"></div>
                                    <div class="profile-name-lg" id="p-name"></div>
                                    <div class="profile-job-lg" id="p-job"></div>
                                    <div class="keyword-box" id="p-keywords"></div>
                                </div>
                                <div id="p-info-list"></div>
                            </div>
                            <!-- ì—­ëŸ‰ -->
                            <div class="card">
                                <div class="card-head">ì „ë¬¸ ì—­ëŸ‰</div>
                                <div id="p-skills"></div>
                            </div>
                            <!-- SWOT -->
                            <div class="card">
                                <div class="card-head">ê°•ì  & ë³´ì™„ì </div>
                                <div class="swot-row">
                                    <div class="swot-col">
                                        <div class="swot-head" style="color:var(--color-magenta)">ğŸ”¥ ê°•ì </div>
                                        <div id="p-strengths"></div>
                                    </div>
                                    <div class="swot-col">
                                        <div class="swot-head" style="color:var(--color-teal)">ğŸ’¡ ë³´ì™„ì </div>
                                        <div id="p-weaknesses"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- ì„±ì¥ -->
                            <div class="card">
                                <div class="card-head">ì„±ì¥ ê³¡ì„ </div>
                                <div style="height:120px; display:flex; align-items:center; justify-content:center;">
                                    <svg width="200" height="100" viewBox="0 0 200 100">
                                        <path id="growth-path" d="" fill="none" stroke="var(--color-purple)" stroke-width="3" stroke-linecap="round"/>
                                        <g id="growth-points"></g>
                                    </svg>
                                </div>
                                <p id="growth-desc" style="text-align:center; font-size:12px; color:#888; margin-top:10px;"></p>
                            </div>
                            <!-- ì´ë ¥ -->
                            <div class="card">
                                <div class="card-head">Career History</div>
                                <div class="timeline" id="p-history"></div>
                            </div>
                        </div>
                    </div>

                    <!-- [TAB 2] ì„±ê³¼ & ìœ¡ì„± -->
                    <div id="tab-perf" class="tab-content">
                        <!-- ì¢…í•© í‰ê°€ -->
                        <div class="eval-summary-card">
                            <div style="font-size:18px; font-weight:700;">2023 ì¢…í•© ì„±ê³¼ ë¦¬í¬íŠ¸</div>
                            <div class="eval-info">
                                <div class="eval-item">
                                    <span class="eval-label">ì—…ë¬´ë‹¬ì„±ë„ (80%)</span>
                                    <span class="eval-value" id="sum-kpi">0ì </span>
                                    <span class="eval-sub kpi" id="calc-kpi">00</span>
                                </div>
                                <div style="font-size:24px; opacity:0.3; padding-top:10px;">+</div>
                                <div class="eval-item">
                                    <span class="eval-label">í•µì‹¬ê°€ì¹˜ (20%)</span>
                                    <span class="eval-value" id="sum-cv">0ì </span>
                                    <span class="eval-sub" id="calc-cv">00</span>
                                </div>
                                <div class="eval-grade-box">
                                    <div class="eval-label">ìµœì¢… ë“±ê¸‰</div>
                                    <div class="eval-grade" id="final-grade">S</div>
                                </div>
                            </div>
                        </div>
                        <!-- KPI + í•µì‹¬ê°€ì¹˜ -->
                        <div class="grid-2-col">
                            <div class="card">
                                <div class="card-head">ì—…ë¬´ ë‹¬ì„±ë„ (OKR/KPI)</div>
                                <div class="kpi-wrapper">
                                    <div class="donut-chart">
                                        <svg width="120" height="120">
                                            <circle class="donut-bg" cx="60" cy="60" r="54"></circle>
                                            <circle class="donut-fg" id="kpi-donut" cx="60" cy="60" r="54"></circle>
                                        </svg>
                                        <div class="donut-val" id="kpi-total"></div>
                                    </div>
                                    <div class="kpi-desc">
                                        <strong>ì£¼ìš” ì„±ê³¼ ìš”ì•½</strong><br>
                                        <span id="kpi-desc-text" style="font-size:12px; color:#888;"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-head">
                                    <span>í•µì‹¬ê°€ì¹˜ 5ëŒ€ í•­ëª©</span>
                                    <span style="font-size:12px; font-weight:400; color:#888;">ì¢…í•© <strong id="cv-total-score" style="color:var(--color-teal)">0</strong> / 100</span>
                                </div>
                                <div id="cv-list" style="display:flex; flex-direction:column; justify-content:center; height:100%;"></div>
                            </div>
                        </div>
                        <!-- ìœ¡ì„± -->
                        <div class="section-title" style="margin-top:40px;"><span class="section-badge">Development</span> ì»¤ë¦¬ì–´ & ì„±ì¥ ëª©í‘œ</div>
                        <div class="card" style="margin-bottom: 24px;">
                            <div class="card-head">Career Path</div>
                            <div class="career-flow">
                                <div class="c-node">
                                    <span class="c-tag">Current</span>
                                    <div class="c-role" id="dev-current"></div>
                                </div>
                                <div class="c-arrow">âœ</div>
                                <div class="c-node future">
                                    <span class="c-tag">Desired Goal</span>
                                    <div class="c-role" id="dev-goal"></div>
                                </div>
                            </div>
                        </div>
                        <div class="grid-2-col">
                            <div class="card">
                                <div class="card-head">ğŸš© ì—­ëŸ‰/ê²½ë ¥ ëª©í‘œ</div>
                                <div id="dev-comp-goals"></div>
                            </div>
                            <div class="card">
                                <div class="card-head">ğŸŒ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ì—¬ ëª©í‘œ</div>
                                <div id="dev-biz-goals"></div>
                            </div>
                        </div>
                    </div>

                    <!-- [TAB 3] ì „ë‹¬ (Feedback) -->
                    <div id="tab-feedback" class="tab-content">
                        
                        <!-- A. ë¦¬ë” ì…ë ¥ -->
                        <div class="fb-section">
                            <span class="fb-label">1. í”¼ë“œë°± í•µì‹¬ í‚¤ì›Œë“œ ì…ë ¥</span>
                            <p class="fb-desc">êµ¬ì„±ì›ì—ê²Œ ì „ë‹¬í•˜ê³  ì‹¶ì€ í•µì‹¬ ë©”ì‹œì§€(í‚¤ì›Œë“œ)ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì˜ˆ: ë¶„ì„ì , ì†Œí†µ, ì—´ì •)</p>
                            
                            <div class="fb-input-grid">
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-magenta)">ğŸ”¥ ê°•ì  (Strength)</div>
                                    <textarea id="input-str" class="fb-textarea" placeholder="ì˜ˆ: ë¶„ì„ì ì¸ ì‚¬ê³ , ëƒ‰ì² í•œ íŒë‹¨"></textarea>
                                </div>
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-teal)">ğŸ’¡ ë³´ì™„ì  (Improvement)</div>
                                    <textarea id="input-imp" class="fb-textarea" placeholder="ì˜ˆ: ì†Œí†µ ê°•í™”, ê²½ì²­"></textarea>
                                </div>
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-purple)">ğŸš€ ì„±ì¥/ë°©í–¥ (Growth)</div>
                                    <textarea id="input-gro" class="fb-textarea" placeholder="ì˜ˆ: í”„ë¡œì íŠ¸ ë¦¬ë”, í˜ì‹  ì£¼ë„"></textarea>
                                </div>
                            </div>
                            <div style="text-align:right;">
                                <button class="btn-primary" onclick="initAiEvidenceSection()">
                                    <span>âœ¨ AI ê·¼ê±° ìƒì„±</span>
                                </button>
                            </div>
                        </div>

                        <!-- B. AI ê·¼ê±° -->
                        <div id="section-evidence" class="fb-section" style="display:none;">
                            <span class="fb-label">2. ë°ì´í„° ê¸°ë°˜ ê·¼ê±° ì„ íƒ (AI Suggestion)</span>
                            <p class="fb-desc">ì…ë ¥í•˜ì‹  í‚¤ì›Œë“œì™€ êµ¬ì„±ì›ì˜ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ AIê°€ êµ¬ì²´ì ì¸ ê·¼ê±°ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. [ì„ íƒ]ì„ ëˆ„ë¥´ë©´ í”¼ë“œë°±ì— ë°˜ì˜ë©ë‹ˆë‹¤.</p>
                            
                            <div class="evidence-grid">
                                <!-- ê°•ì  ê·¼ê±° -->
                                <div class="evidence-box" id="box-str">
                                    <div class="evidence-title">ê°•ì  ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-str-text"></div>
                                    <div class="evidence-controls">
                                        <button class="btn-xs" onclick="regenerateEvidence('str')">ğŸ”„ ì¬ìƒì„±</button>
                                        <button class="btn-xs btn-select" id="btn-sel-str" onclick="toggleSelectEvidence('str')">ì„ íƒ</button>
                                    </div>
                                </div>
                                <!-- ë³´ì™„ì  ê·¼ê±° -->
                                <div class="evidence-box" id="box-imp">
                                    <div class="evidence-title">ë³´ì™„ì  ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-imp-text"></div>
                                    <div class="evidence-controls">
                                        <button class="btn-xs" onclick="regenerateEvidence('imp')">ğŸ”„ ì¬ìƒì„±</button>
                                        <button class="btn-xs btn-select" id="btn-sel-imp" onclick="toggleSelectEvidence('imp')">ì„ íƒ</button>
                                    </div>
                                </div>
                                <!-- ì„±ì¥ ê·¼ê±° -->
                                <div class="evidence-box" id="box-gro">
                                    <div class="evidence-title">ì„±ì¥ ë°©í–¥ ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-gro-text"></div>
                                    <div class="evidence-controls">
                                        <button class="btn-xs" onclick="regenerateEvidence('gro')">ğŸ”„ ì¬ìƒì„±</button>
                                        <button class="btn-xs btn-select" id="btn-sel-gro" onclick="toggleSelectEvidence('gro')">ì„ íƒ</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- C. í†¤ì•¤ë§¤ë„ˆ -->
                        <div class="fb-section">
                            <span class="fb-label">3. ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ìŠ¤íƒ€ì¼ ì„¤ì •</span>
                            <p class="fb-desc">ì„¤ì •ì„ ë³€ê²½í•˜ë©´ í•˜ë‹¨ì˜ ìµœì¢… ë©”ì‹œì§€ê°€ <strong>ì¦‰ì‹œ ìˆ˜ì •</strong>ë©ë‹ˆë‹¤.</p>
                            <div class="tone-container">
                                <div class="tone-group">
                                    <span class="tone-label">í™”ë²•</span>
                                    <div class="tone-options">
                                        <div class="tone-option selected" onclick="setTone('directness', 'direct', this)">ì§ì„¤ì </div>
                                        <div class="tone-option" onclick="setTone('directness', 'indirect', this)">ì™„ê³¡í•¨</div>
                                    </div>
                                </div>
                                <div class="tone-group">
                                    <span class="tone-label">ê´€ì </span>
                                    <div class="tone-options">
                                        <div class="tone-option selected" onclick="setTone('focus', 'task', this)">ê³¼ì—… ì¤‘ì‹¬</div>
                                        <div class="tone-option" onclick="setTone('focus', 'relationship', this)">ê´€ê³„ ì¤‘ì‹¬</div>
                                    </div>
                                </div>
                                <div class="tone-group">
                                    <span class="tone-label">ì–´ì¡°</span>
                                    <div class="tone-options">
                                        <div class="tone-option selected" onclick="setTone('style', 'logical', this)">ë…¼ë¦¬ì </div>
                                        <div class="tone-option" onclick="setTone('style', 'soft', this)">ë¶€ë“œëŸ¬ì›€</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- D. ìµœì¢… í”„ë¦¬ë·° -->
                        <div class="fb-section">
                            <span class="fb-label">4. ìµœì¢… í”¼ë“œë°± ë¯¸ë¦¬ë³´ê¸°</span>
                            <div class="final-box">
                                <textarea id="final-feedback-text" class="final-text" placeholder="AI ê·¼ê±° ì„ íƒ ë° í†¤ ì„¤ì •ì„ ì™„ë£Œí•˜ë©´ ìµœì¢… ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤."></textarea>
                                <div class="action-row">
                                    <button class="btn-primary" style="background:var(--color-teal);" onclick="alert('í”¼ë“œë°±ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!')">
                                        <span>ğŸ“© í”¼ë“œë°± ì „ì†¡</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // [ë°ì´í„°] 
        const teamDB = {
            'ë°•íƒœí¬': {
                job: 'Data Scientist', avatar: 'ğŸ‘©ğŸ»â€ğŸ’»', years: '5ë…„ 3ê°œì›”', joinDate: '2019.01.05', eval: 'S',
                keywords: ['#ë°ì´í„°ë¶„ì„', '#í†µê³„', '#ë…¼ë¦¬ì '],
                skills: [ { name: 'Python Analysis', per: 85, color: 'var(--color-purple)' }, { name: 'Machine Learning', per: 70, color: 'var(--color-magenta)' } ],
                strengths: ['ë¬¸ì œ í•µì‹¬ íŒŒì•…', 'ë¹ ë¥¸ íˆ´ í•™ìŠµ'], weaknesses: ['ëŒ€ë©´ ë°œí‘œ ìŠ¤í‚¬', 'ë™ì‹œë‹¤ë°œ ì—…ë¬´ ìŠ¤íŠ¸ë ˆìŠ¤'],
                growthPath: "M10 90 Q 80 85, 120 50 T 190 10", growthPoints: [{x:10,y:90}, {x:120,y:50}, {x:190,y:10}], growthDesc: "ìµœê·¼ 6ê°œì›”ê°„ ë¶„ì„ ì—­ëŸ‰ì´ ê¸‰ê²©íˆ ì„±ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.",
                history: [ { date: '2023.01', title: 'DX ì¶”ì§„íŒ€ ì´ë™', desc: 'ì „ì‚¬ AI ëª¨ë¸ë§ ë¦¬ë“œ' }, { date: '2019.01', title: 'ì‹ ì… ì…ì‚¬', desc: 'ì„ìœ í™”í•™ë³¸ë¶€ ìƒì‚°ê¸°ìˆ íŒ€' } ],
                kpiTotal: 92, kpiDesc: 'ì „ì‚¬ ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë° ëª¨ë¸ ì •í™•ë„ ëª©í‘œ ì´ˆê³¼ ë‹¬ì„±',
                coreValues: [ { name: 'Customer Focus', score: 95 }, { name: 'Sustainability', score: 85 }, { name: 'Agility', score: 90 }, { name: 'Passion', score: 92 }, { name: 'Collaboration', score: 80 } ],
                currRole: 'Data Scientist', goalRole: 'Data Tech Lead', compGoals: ['MLOps êµ¬ì¶• ê²½í—˜', 'AWS ìê²© ì·¨ë“'], bizGoals: ['ìƒì„±í˜• AI ì±—ë´‡', 'ê³µì • ì´ìƒ íƒì§€']
            },
            'ë°•ì¬í˜„': {
                job: 'AI Researcher', avatar: 'ğŸ‘¨ğŸ»â€ğŸ”¬', years: '8ë…„ 1ê°œì›”', joinDate: '2016.03.02', eval: 'A',
                keywords: ['#AI', '#ë”¥ëŸ¬ë‹', '#í˜ì‹ '],
                skills: [ { name: 'Deep Learning', per: 95, color: 'var(--color-purple)' }, { name: 'Computer Vision', per: 80, color: 'var(--color-magenta)' } ],
                strengths: ['ì—°êµ¬ ì—­ëŸ‰', 'ìµœì í™”'], weaknesses: ['ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì ', 'ë¬¸ì„œí™”'],
                growthPath: "M10 70 Q 100 50, 190 20", growthPoints: [{x:10,y:70}, {x:100,y:50}, {x:190,y:20}], growthDesc: "ì…ì‚¬ ì´ë˜ ê¾¸ì¤€íˆ ë†’ì€ ì—°êµ¬ ì„±ê³¼ë¥¼ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                history: [ { date: '2022.01', title: 'AI ì„ í–‰ì—°êµ¬íŒ€', desc: 'ë¹„ì „ ê²€ì‚¬ ì•Œê³ ë¦¬ì¦˜ ê³ ë„í™”' } ],
                kpiTotal: 88, kpiDesc: 'ì‹ ê·œ ì•Œê³ ë¦¬ì¦˜ íŠ¹í—ˆ 2ê±´ ì¶œì› ë° í•™íšŒ ë°œí‘œ',
                coreValues: [ { name: 'Customer Focus', score: 80 }, { name: 'Sustainability', score: 75 }, { name: 'Agility', score: 95 }, { name: 'Passion', score: 90 }, { name: 'Collaboration', score: 70 } ],
                currRole: 'AI Researcher', goalRole: 'Principal Researcher', compGoals: ['ë…¼ë¬¸ êµ¬í˜„', 'í•™íšŒ ë„¤íŠ¸ì›Œí‚¹'], bizGoals: ['ë¹„ì „ ê²€ì‚¬ê¸° ìƒìš©í™”', 'ë¶ˆëŸ‰ë¥  ê°ì†Œ']
            },
            'ë°•ì •í˜¸': {
                job: 'Project Manager', avatar: 'ğŸ‘¨ğŸ»â€ğŸ’¼', years: '12ë…„', joinDate: '2012.01.10', eval: 'A+',
                keywords: ['#PM', '#ë¦¬ë”ì‹­'],
                skills: [ { name: 'Project Mgmt', per: 92, color: 'var(--color-purple)' }, { name: 'Communication', per: 88, color: 'var(--color-teal)' } ],
                strengths: ['ì¶”ì§„ë ¥', 'ì¡°ìœ¨'], weaknesses: ['ê¸°ìˆ  ì´í•´ë„'],
                growthPath: "M10 30 Q 100 20, 190 20", growthPoints: [{x:10,y:30}, {x:100,y:20}, {x:190,y:20}], growthDesc: "PMìœ¼ë¡œì„œì˜ ì—­ëŸ‰ì´ ì„±ìˆ™ ë‹¨ê³„ì— ì ‘ì–´ë“¤ì–´ ì•ˆì •ì ì…ë‹ˆë‹¤.",
                history: [ { date: '2020.01', title: 'DX PM', desc: 'ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬ êµ¬ì¶•' } ],
                kpiTotal: 95, kpiDesc: 'ëŒ€í˜• í”„ë¡œì íŠ¸ ë‚©ê¸° 100% ì¤€ìˆ˜ ë° ì˜ˆì‚° ì ˆê°',
                coreValues: [ { name: 'Customer Focus', score: 90 }, { name: 'Sustainability', score: 85 }, { name: 'Agility', score: 88 }, { name: 'Passion', score: 92 }, { name: 'Collaboration', score: 98 } ],
                currRole: 'Project Manager', goalRole: 'Center Leader', compGoals: ['PMP ê°±ì‹ ', 'ì• ìì¼ ì½”ì¹­'], bizGoals: ['DX ì„±ê³µì  ëŸ°ì¹­']
            },
            'ë°•ì¬ì›': {
                job: 'Software Eng.', avatar: 'ğŸ‘¨ğŸ»â€ğŸ’»', years: '3ë…„', joinDate: '2021.02', eval: 'A',
                keywords: ['#ê°œë°œ', '#í´ë¼ìš°ë“œ'],
                skills: [ { name: 'React', per: 75, color: 'var(--color-purple)' }, { name: 'AWS', per: 60, color: 'var(--color-lightblue)' } ],
                strengths: ['ì„±ì‹¤í•¨', 'í”„ë¡œí† íƒ€ì´í•‘'], weaknesses: ['ì•„í‚¤í…ì²˜', 'ì½”ë“œë¦¬ë·°'],
                growthPath: "M10 90 L 80 80 L 190 40", growthPoints: [{x:10,y:90}, {x:80,y:80}, {x:190,y:40}], growthDesc: "ì´ˆê¸° ì ì‘ì„ ë§ˆì¹˜ê³  ê°œë°œ ìƒì‚°ì„±ì´ í–¥ìƒë˜ê³  ìˆìŠµë‹ˆë‹¤.",
                history: [ { date: '2021.02', title: 'ì‹ ì… ì…ì‚¬', desc: 'í”Œë«í¼ ê°œë°œ' } ],
                kpiTotal: 85, kpiDesc: 'ë ˆê±°ì‹œ ì½”ë“œ ë¦¬íŒ©í† ë§ ë° ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ',
                coreValues: [ { name: 'Customer Focus', score: 85 }, { name: 'Sustainability', score: 80 }, { name: 'Agility', score: 85 }, { name: 'Passion', score: 90 }, { name: 'Collaboration', score: 88 } ],
                currRole: 'Software Eng.', goalRole: 'Architect', compGoals: ['Kubernetes', 'MSA'], bizGoals: ['ì•ˆì •ì„± 99.9%']
            },
            'í•˜ìœ ë¦¼': {
                job: 'UX Designer', avatar: 'ğŸ‘©ğŸ»â€ğŸ¨', years: '4ë…„', joinDate: '2019.11', eval: 'A',
                keywords: ['#UX', '#ë””ìì¸'],
                skills: [ { name: 'UI Design', per: 88, color: 'var(--color-magenta)' } ],
                strengths: ['ì°½ì˜ì„±', 'ì¸ì‚¬ì´íŠ¸'], weaknesses: ['ë°ì´í„° ë¶„ì„'],
                growthPath: "M10 90 C 60 90, 90 40, 190 30", growthPoints: [{x:10,y:90}, {x:190,y:30}], growthDesc: "ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶•ì„ í†µí•´ ì „ë¬¸ì„±ì´ í¬ê²Œ í™•ëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤.",
                history: [ { date: '2019.11', title: 'ì…ì‚¬', desc: 'ë””ìì¸ì„¼í„°' } ],
                kpiTotal: 90, kpiDesc: 'ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶• ë° ì‚¬ìš©ì ë§Œì¡±ë„ ìƒìŠ¹',
                coreValues: [ { name: 'Customer Focus', score: 98 }, { name: 'Sustainability', score: 80 }, { name: 'Agility', score: 85 }, { name: 'Passion', score: 90 }, { name: 'Collaboration', score: 92 } ],
                currRole: 'UX Designer', goalRole: 'Product Designer', compGoals: ['Figma ì‹¬í™”'], bizGoals: ['ì´íƒˆë¥  ê°ì†Œ']
            }
        };
        
        const members = Object.keys(teamDB);
        let currentMemberKey = null;
        let toneProfile = { directness: 'direct', focus: 'task', style: 'logical' };
        
        // ì„ íƒëœ ê·¼ê±° ì €ì¥
        let selectedEvidence = { str: '', imp: '', gro: '' };

        window.onload = () => { renderSidebar(); setupSearch(); };

        function setupSearch() {
            const input = document.getElementById('member-search');
            input.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    const val = this.value.trim();
                    const found = members.find(m => m.includes(val));
                    if (found) { selectMember(found); this.value = ''; } 
                    else { alert('êµ¬ì„±ì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'); }
                }
            });
        }

        function resetView() {
            document.getElementById('empty-state').style.display = 'flex';
            document.getElementById('main-content').classList.remove('active');
            document.querySelectorAll('.member-item').forEach(el => el.classList.remove('active'));
            currentMemberKey = null;
        }

        function renderSidebar() {
            const list = document.getElementById('member-list');
            members.forEach(name => {
                const d = teamDB[name];
                const full = name + (name.includes('ì±…ì„')?'':' ì„ ì„');
                const div = document.createElement('div');
                div.className = 'member-item';
                div.id = `mem-${name}`;
                div.onclick = () => selectMember(name);
                div.innerHTML = `<div class="m-avatar">${d.avatar}</div><div class="m-info"><div class="m-name">${full}</div><div class="m-job">${d.job}</div></div>`;
                list.appendChild(div);
            });
        }

        function calculateGrade(score) {
            if (score >= 95) return 'S'; if (score >= 90) return 'A+';
            if (score >= 85) return 'A'; if (score >= 80) return 'B+';
            if (score >= 70) return 'B'; return 'C';
        }

        function selectMember(name) {
            currentMemberKey = name;
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('main-content').classList.add('active');
            
            document.querySelectorAll('.member-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`mem-${name}`).classList.add('active');

            const d = teamDB[name];
            const full = name + (name.includes('ì±…ì„')?'':' ì„ ì„');

            // --- TAB 1 ---
            document.getElementById('p-avatar').innerText = d.avatar;
            document.getElementById('p-name').innerText = full;
            document.getElementById('p-job').innerText = d.job;
            document.getElementById('p-keywords').innerHTML = d.keywords.map(k => `<span class="keyword">${k}</span>`).join('');
            document.getElementById('p-info-list').innerHTML = `<div class="info-item"><span class="info-label">ê²½ë ¥</span><span class="info-value">${d.years}</span></div><div class="info-item"><span class="info-label">ì…ì‚¬</span><span class="info-value">${d.joinDate}</span></div><div class="info-item"><span class="info-label">ì „ë…„í‰ê°€</span><span class="info-value">${d.eval}</span></div>`;
            document.getElementById('p-skills').innerHTML = d.skills.map(s => `<div class="skill-row"><div class="skill-meta"><span>${s.name}</span><span>${s.per}%</span></div><div class="progress-track"><div class="progress-fill" style="width:${s.per}%; background:${s.color}"></div></div></div>`).join('');
            document.getElementById('p-strengths').innerHTML = d.strengths.map(s => `<div class="swot-item">${s}</div>`).join('');
            document.getElementById('p-weaknesses').innerHTML = d.weaknesses.map(s => `<div class="swot-item">${s}</div>`).join('');
            document.getElementById('growth-path').setAttribute('d', d.growthPath);
            document.getElementById('growth-desc').innerText = d.growthDesc;
            const pointsGroup = document.getElementById('growth-points');
            pointsGroup.innerHTML = '';
            d.growthPoints.forEach(pt => {
                const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute("cx", pt.x); circle.setAttribute("cy", pt.y); circle.setAttribute("r", "4"); circle.setAttribute("fill", "#fff"); circle.setAttribute("stroke", "var(--color-purple)"); circle.setAttribute("stroke-width", "2");
                pointsGroup.appendChild(circle);
            });
            document.getElementById('p-history').innerHTML = d.history.map(h => `<div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-date">${h.date}</div><div class="timeline-content">${h.title}</div><div class="timeline-sub">${h.desc}</div></div>`).join('');

            // --- TAB 2 ---
            let cvSum = 0; let cvHtml = '';
            d.coreValues.forEach(c => {
                cvSum += c.score;
                cvHtml += `<div class="cv-item"><div class="cv-header"><span class="cv-name">${c.name}</span><span class="cv-val">${c.score}</span></div><div class="cv-bar-bg"><div class="cv-bar-fill" style="width:${c.score}%;"></div></div></div>`;
            });
            const cvAvg = Math.round(cvSum / 5);
            document.getElementById('cv-list').innerHTML = cvHtml;
            document.getElementById('cv-total-score').innerText = cvAvg;

            const donutFg = document.getElementById('kpi-donut');
            const offset = 377 - (377 * d.kpiTotal / 100);
            donutFg.style.transition = 'none'; donutFg.style.strokeDashoffset = 377;
            setTimeout(() => { donutFg.style.transition = 'stroke-dashoffset 1s ease-out'; donutFg.style.strokeDashoffset = offset; }, 50);
            document.getElementById('kpi-total').innerText = d.kpiTotal + '%';
            document.getElementById('kpi-desc-text').innerText = d.kpiDesc;

            const finalScore = (d.kpiTotal * 0.8) + (cvAvg * 0.2);
            document.getElementById('sum-kpi').innerText = d.kpiTotal;
            document.getElementById('calc-kpi').innerText = `(x 0.8 = ${(d.kpiTotal * 0.8).toFixed(1)})`;
            document.getElementById('sum-cv').innerText = cvAvg;
            document.getElementById('calc-cv').innerText = `(x 0.2 = ${(cvAvg * 0.2).toFixed(1)})`;
            document.getElementById('final-grade').innerText = calculateGrade(finalScore);

            document.getElementById('dev-current').innerText = d.currRole;
            document.getElementById('dev-goal').innerText = d.goalRole;
            const goalList = arr => `<ul style="list-style:none; padding:0;">${arr.map(g => `<li class="goal-li">${g}</li>`).join('')}</ul>`;
            document.getElementById('dev-comp-goals').innerHTML = goalList(d.compGoals);
            document.getElementById('dev-biz-goals').innerHTML = goalList(d.bizGoals);

            // --- TAB 3 ì´ˆê¸°í™” ---
            resetFeedbackTab();
        }

        function switchTab(id, el) {
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('tab-' + id).classList.add('active');
        }

        /* ================= FEEDBACK LOGIC (Enhanced Context AI) ================= */
        
        // 1. ë°©ëŒ€í•œ í‚¤ì›Œë“œ ë°ì´í„°ë² ì´ìŠ¤ (Feedback Dictionary)
        const feedbackDictionary = {
            'Analytic': {
                keywords: ['ë¶„ì„', 'ë…¼ë¦¬', 'ë°ì´í„°', 'ê°ê´€', 'ê·¼ê±°', 'ëƒ‰ì² ', 'ìˆ˜ì¹˜', 'ì‚¬ì‹¤'],
                str: [
                    "ê°ê´€ì ì¸ ë°ì´í„°ì— ê¸°ë°˜í•˜ì—¬ ìƒí™©ì„ ëƒ‰ì² í•˜ê²Œ íŒë‹¨í•˜ëŠ” ëŠ¥ë ¥ì´ ë§¤ìš° íƒì›”í•©ë‹ˆë‹¤.",
                    "ë³µì¡í•œ ë¬¸ì œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„í•´í•˜ê³ , ìˆ˜ì¹˜ì— ê·¼ê±°í•´ í•´ê²°ì±…ì„ ì œì‹œí•˜ëŠ” ì ì´ ì¸ìƒì ì…ë‹ˆë‹¤.",
                    "ëª¨í˜¸í•œ ìƒí™©ì—ì„œë„ ë°ì´í„°ë¥¼ í†µí•´ ëª…í™•í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•´ë‚´ëŠ” ì—­ëŸ‰ì´ ë‹ë³´ì…ë‹ˆë‹¤."
                ],
                imp: [
                    "ë‹¤ë§Œ, ì§€ë‚˜ì¹˜ê²Œ ë…¼ë¦¬ì ì¸ ì ‘ê·¼ë³´ë‹¤ëŠ” ìƒí™©ì— ë”°ë¼ íŒ€ì›ì˜ ê°ì •ì„ ê³ ë ¤í•œ ìœ ì—°í•œ ì†Œí†µë„ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤.",
                    "ë°ì´í„° ë¶„ì„ ê²°ê³¼ë¿ë§Œ ì•„ë‹ˆë¼, ê·¸ê²ƒì´ ë¹„ì¦ˆë‹ˆìŠ¤ì— ë¯¸ì¹˜ëŠ” ì •ì„±ì ì¸ ì˜í–¥ê¹Œì§€ ê³ ë ¤í•œë‹¤ë©´ ë” ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤.",
                    "ìˆ˜ì¹˜ì ì¸ ì™„ë²½í•¨ì„ ì¶”êµ¬í•˜ë‹¤ê°€ ì˜ì‚¬ê²°ì • íƒ€ì´ë°ì´ ëŠ¦ì–´ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤."
                ],
                gro: [
                    "ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ë¥¼ ë„˜ì–´, ë°ì´í„°ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëµì„ ì œì•ˆí•˜ëŠ” ì „ëµê°€ë¡œ ì„±ì¥í•˜ê¸¸ ê¸°ëŒ€í•©ë‹ˆë‹¤.",
                    "ë³¸ì¸ì˜ ë¶„ì„ ì—­ëŸ‰ì„ íŒ€ì›ë“¤ì—ê²Œ ì „íŒŒí•˜ì—¬, íŒ€ ì „ì²´ì˜ ë°ì´í„° ë¦¬í„°ëŸ¬ì‹œë¥¼ ë†’ì´ëŠ” ì—­í• ì„ í•´ì£¼ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤."
                ]
            },
            'Communication': {
                keywords: ['ì†Œí†µ', 'ê²½ì²­', 'ì„¤ë“', 'í˜‘ì—…', 'ê³µìœ ', 'í”¼ë“œë°±', 'ëŒ€í™”', 'ê´€ê³„'],
                str: [
                    "íƒ€ ë¶€ì„œì™€ì˜ ê°ˆë“± ìƒí™©ì—ì„œë„ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ë©° ì›ë§Œí•œ í•©ì˜ë¥¼ ì´ëŒì–´ë‚´ëŠ” ì†Œí†µ ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.",
                    "í•­ìƒ ë™ë£Œì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ê³  ì¡´ì¤‘í•˜ëŠ” íƒœë„ë¡œ íŒ€ ë‚´ ì‹ ë¢°ë¥¼ í˜•ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                    "ë³µì¡í•œ ì´ìŠˆë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ì—¬ ì´í•´ê´€ê³„ìë“¤ì„ ì„¤ë“í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤."
                ],
                imp: [
                    "íšŒì˜ ì‹œ ë³¸ì¸ì˜ ì˜ê²¬ì„ ì¡°ê¸ˆ ë” ëª…í™•í•˜ê³  ìì‹ ê° ìˆê²Œ ê°œì§„í•œë‹¤ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.",
                    "ì •ë³´ ê³µìœ  ì‹œì ì´ë‚˜ ë°©ì‹ì— ìˆì–´, ìœ ê´€ë¶€ì„œê°€ ë¯¸ë¦¬ ì¸ì§€í•  ìˆ˜ ìˆë„ë¡ ì„ ì œì ì¸ ì†Œí†µì´ í•„ìš”í•©ë‹ˆë‹¤.",
                    "ì¢‹ì€ ê´€ê³„ ìœ ì§€ë„ ì¤‘ìš”í•˜ì§€ë§Œ, í•„ìš”í•  ë•ŒëŠ” ê±´ì„¤ì ì¸ ë¹„íŒì´ë‚˜ ë°˜ëŒ€ ì˜ê²¬ë„ ì œì‹œí•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤."
                ],
                gro: [
                    "íŒ€ ë‚´ë¶€ ì†Œí†µì„ ë„˜ì–´, ì „ì‚¬ ì°¨ì›ì˜ í”„ë¡œì íŠ¸ë¥¼ ì¡°ìœ¨í•˜ëŠ” ì»¤ë®¤ë‹ˆì¼€ì´í„°ë¡œ ì„±ì¥í•˜ê¸¸ ë°”ëë‹ˆë‹¤.",
                    "ì´í•´ê´€ê³„ê°€ ìƒì¶©í•˜ëŠ” ë³µì¡í•œ ìƒí™©ì—ì„œë„ ìœˆ-ìœˆì„ ì´ëŒì–´ë‚´ëŠ” í˜‘ìƒ ì „ë¬¸ê°€ê°€ ë˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤."
                ]
            },
            'Detail': {
                keywords: ['ê¼¼ê¼¼', 'ì„¬ì„¸', 'ë””í…Œì¼', 'ì™„ë²½', 'ì±…ì„', 'ì¹˜ë°€', 'ì •í™•'],
                str: [
                    "ì‘ì€ ì˜¤ë¥˜ë„ ë†“ì¹˜ì§€ ì•ŠëŠ” ê¼¼ê¼¼í•¨ìœ¼ë¡œ ì—…ë¬´ì˜ ì™„ì„±ë„ë¥¼ ë†’ì´ëŠ” ì ì„ ì¹­ì°¬í•©ë‹ˆë‹¤.",
                    "ë””í…Œì¼í•œ ë¶€ë¶„ê¹Œì§€ ì±™ê¸°ëŠ” ì¹˜ë°€í•¨ ë•ë¶„ì— í”„ë¡œì íŠ¸ ë¦¬ìŠ¤í¬ë¥¼ ì‚¬ì „ì— ì˜ˆë°©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.",
                    "ë§¡ì€ ì—…ë¬´ì— ëŒ€í•´ ëê¹Œì§€ ì±…ì„ì„ ì§€ê³  ì™„ë²½í•˜ê²Œ ë§ˆë¬´ë¦¬í•˜ëŠ” íƒœë„ê°€ ê·€ê°ì´ ë©ë‹ˆë‹¤."
                ],
                imp: [
                    "ë•Œë¡œëŠ” ì„¸ë¶€ì ì¸ ë””í…Œì¼ì— ëª°ë‘í•˜ëŠë¼ ì „ì²´ì ì¸ ì¼ì •ì´ë‚˜ í° ê·¸ë¦¼ì„ ë†“ì¹˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.",
                    "ì™„ë²½ì£¼ì˜ ì„±í–¥ìœ¼ë¡œ ì¸í•´ ì—…ë¬´ ì†ë„ê°€ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ, ì¤‘ìš”ë„ì— ë”°ë¥¸ ì™„ê¸‰ ì¡°ì ˆì´ í•„ìš”í•©ë‹ˆë‹¤."
                ],
                gro: [
                    "ë””í…Œì¼ ê´€ë¦¬ ëŠ¥ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì˜ í’ˆì§ˆì„ ê´€ë¦¬í•˜ëŠ” QA ë¦¬ë”ë¡œ ì„±ì¥í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.",
                    "ì‹¤ë¬´ì˜ ê¼¼ê¼¼í•¨ì„ ìœ ì§€í•˜ë©´ì„œë„, ê±°ì‹œì ì¸ ê´€ì ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ë°”ë¼ë³´ëŠ” ì‹œì•¼ë¥¼ ë„“í˜€ ë‚˜ê°€ê¸¸ ë°”ëë‹ˆë‹¤."
                ]
            },
            'Innovation': {
                keywords: ['ì°½ì˜', 'í˜ì‹ ', 'ì•„ì´ë””ì–´', 'ê°œì„ ', 'ìƒˆë¡œìš´', 'ë„ì „', 'ë³€í™”'],
                str: [
                    "ê¸°ì¡´ ê´€í–‰ì— ì–½ë§¤ì´ì§€ ì•Šê³  ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆí•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°œì„ í•˜ëŠ” ëª¨ìŠµì´ ì¸ìƒì ì…ë‹ˆë‹¤.",
                    "ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë„ì „ì ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ìˆ ì´ë‚˜ ë°©ì‹ì„ ë„ì…í•˜ëŠ” íƒœë„ê°€ í›Œë¥­í•©ë‹ˆë‹¤.",
                    "ì°½ì˜ì ì¸ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì„ ë°œíœ˜í•˜ì—¬ ê³ ì§ˆì ì¸ ì´ìŠˆë¥¼ í•´ê²°í•œ ì ì„ ë†’ì´ í‰ê°€í•©ë‹ˆë‹¤."
                ],
                imp: [
                    "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆí•˜ëŠ” ê²ƒì— ê·¸ì¹˜ì§€ ì•Šê³ , ì‹¤ì œ ì„±ê³¼ë¡œ ì´ì–´ì§€ë„ë¡ ëê¹Œì§€ ì‹¤í–‰í•˜ëŠ” ëˆê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                    "í˜ì‹ ì ì¸ ì‹œë„ë„ ì¢‹ì§€ë§Œ, ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ì˜ ì•ˆì •ì„±ì´ë‚˜ íŒ€ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê³ ë ¤í•œ í˜„ì‹¤ì ì¸ ì ‘ê·¼ë„ ì¤‘ìš”í•©ë‹ˆë‹¤."
                ],
                gro: [
                    "íŒ€ì˜ ê¸°ìˆ ì  í˜ì‹ ì„ ì£¼ë„í•˜ëŠ” ì´ë…¸ë² ì´í„°(Innovator)ë¡œì„œ ì¡°ì§ ë¬¸í™”ë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ì—­í• ì„ ê¸°ëŒ€í•©ë‹ˆë‹¤.",
                    "ë‹¨ìˆœí•œ ê°œì„ ì„ ë„˜ì–´, ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ ìì²´ë¥¼ í˜ì‹ í•  ìˆ˜ ìˆëŠ” ì°½ì¡°ì ì¸ ë¦¬ë”ë¡œ ì„±ì¥í•˜ê¸¸ ë°”ëë‹ˆë‹¤."
                ]
            },
            'Leadership': {
                keywords: ['ë¦¬ë”ì‹­', 'ì†”ì„ ìˆ˜ë²”', 'ë™ê¸°ë¶€ì—¬', 'ì½”ì¹­', 'ì£¼ë„', 'ì±…ì„ê°'],
                str: [
                    "í˜ë“  ì—…ë¬´ë„ ì†”ì„ ìˆ˜ë²”í•˜ì—¬ ë§¡ìŒìœ¼ë¡œì¨ íŒ€ì›ë“¤ì—ê²Œ ê¸ì •ì ì¸ ë™ê¸°ë¶€ì—¬ë¥¼ ì£¼ê³  ìˆìŠµë‹ˆë‹¤.",
                    "í”„ë¡œì íŠ¸ì˜ ë°©í–¥ì„±ì„ ëª…í™•íˆ ì œì‹œí•˜ê³  íŒ€ì›ë“¤ì„ ì´ëŒì–´ê°€ëŠ” ë¦¬ë”ì‹­ì´ ë‹ë³´ì…ë‹ˆë‹¤.",
                    "í›„ë°° ì‚¬ì›ë“¤ì˜ ì„±ì¥ì„ ìœ„í•´ ì ê·¹ì ìœ¼ë¡œ ì½”ì¹­í•˜ê³  ë©˜í† ë§í•˜ëŠ” ëª¨ìŠµì´ í›Œë¥­í•©ë‹ˆë‹¤."
                ],
                imp: [
                    "ë¦¬ë”ë¡œì„œ ì§ì ‘ ì‹¤ë¬´ë¥¼ ì±™ê¸°ê¸°ë³´ë‹¤ëŠ”, ì ì ˆí•œ ìœ„ì„(Delegation)ì„ í†µí•´ íŒ€ì›ë“¤ì„ ì„±ì¥ì‹œí‚¬ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.",
                    "íŒ€ì›ë“¤ì˜ ë‹¤ì–‘í•œ ì˜ê²¬ì„ ìˆ˜ë ´í•˜ëŠ” ê³¼ì •ì—ì„œ ì¡°ê¸ˆ ë” í¬ìš©ì ì¸ íƒœë„ë¥¼ ë³´ì´ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤."
                ],
                gro: [
                    "í•œ íŒ€ì„ ë„˜ì–´ ì—¬ëŸ¬ ì¡°ì§ì„ ì•„ìš°ë¥´ëŠ” í†µí•© ë¦¬ë”ì‹­ì„ ê°–ì¶˜ ê´€ë¦¬ìë¡œ ì„±ì¥í•˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤.",
                    "ì¡°ì§ì˜ ë¹„ì „ê³¼ ê°œì¸ì˜ ëª©í‘œë¥¼ ì¼ì¹˜ì‹œì¼œ ì„±ê³¼ë¥¼ ê·¹ëŒ€í™”í•˜ëŠ” ë¦¬ë”ê°€ ë˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤."
                ]
            },
            'Passion': {
                keywords: ['ì—´ì •', 'ì ê·¹', 'ê¸ì •', 'ë„ì „', 'ëˆê¸°', 'ì—ë„ˆì§€'],
                str: [
                    "ë§¤ì‚¬ ì ê·¹ì ì´ê³  ì—´ì •ì ì¸ íƒœë„ë¡œ ì—…ë¬´ì— ì„í•˜ì—¬ íŒ€ ë¶„ìœ„ê¸°ë¥¼ í™œê¸°ì°¨ê²Œ ë§Œë“­ë‹ˆë‹¤.",
                    "ì–´ë ¤ìš´ ê³¼ì œì—ë„ êµ´í•˜ì§€ ì•Šê³  ëˆê¸° ìˆê²Œ ë„ì „í•˜ëŠ” ëª¨ìŠµì´ íƒ€ì˜ ëª¨ë²”ì´ ë©ë‹ˆë‹¤.",
                    "ê¸ì •ì ì¸ ë§ˆì¸ë“œë¡œ ë³€í™”ë¥¼ ìˆ˜ìš©í•˜ê³  ì£¼ë„ì ìœ¼ë¡œ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì ì„ ì¹­ì°¬í•©ë‹ˆë‹¤."
                ],
                imp: [
                    "ì˜ìš•ì´ ì•ì„œ ë³¸ì¸ì˜ ì—­ëŸ‰ì„ ì´ˆê³¼í•˜ëŠ” ì—…ë¬´ë¥¼ ë¬´ë¦¬í•˜ê²Œ ë§¡ì§€ ì•Šë„ë¡ ì¡°ì ˆì´ í•„ìš”í•©ë‹ˆë‹¤.",
                    "ì—´ì •ì ì¸ ê²ƒì€ ì¢‹ìœ¼ë‚˜, ë•Œë¡œëŠ” ì°¨ë¶„í•˜ê²Œ ìƒí™©ì„ ëŒì•„ë³´ëŠ” ì—¬ìœ ë¥¼ ê°€ì§€ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤."
                ],
                gro: [
                    "ì´ëŸ¬í•œ ì—´ì •ì„ ë°”íƒ•ìœ¼ë¡œ, íŒ€ì˜ í•µì‹¬ ì¸ì¬ë¥¼ ë„˜ì–´ ì¡°ì§ ë¬¸í™”ë¥¼ ì„ ë„í•˜ëŠ” ì•°ë°°ì„œë”ê°€ ë˜ê¸¸ ë°”ëë‹ˆë‹¤."
                ]
            },
            'Speed': {
                keywords: ['ì†ë„', 'ë¯¼ì²©', 'ë¹ ë¥¸', 'ë‚©ê¸°', 'ì‹ ì†', 'íš¨ìœ¨'],
                str: [
                    "ë¹ ë¥¸ ì‹¤í–‰ë ¥ìœ¼ë¡œ ì—…ë¬´ë¥¼ ì‹ ì†í•˜ê²Œ ì²˜ë¦¬í•˜ì—¬ ì „ì²´ í”„ë¡œì íŠ¸ ì¼ì • ë‹¨ì¶•ì— ê¸°ì—¬í–ˆìŠµë‹ˆë‹¤.",
                    "ê¸‰ë³€í•˜ëŠ” ìƒí™©ì—ë„ ë¯¼ì²©í•˜ê²Œ ëŒ€ì‘í•˜ëŠ” ëŠ¥ë ¥ì´ ë§¤ìš° ë›°ì–´ë‚©ë‹ˆë‹¤."
                ],
                imp: [
                    "ì†ë„ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê²°ê³¼ë¬¼ì˜ ì •í™•ì„±ì„ í•œ ë²ˆ ë” ê²€í† í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©´ ì™„ë²½í•  ê²ƒì…ë‹ˆë‹¤."
                ],
                gro: [
                    "ê°œì¸ì˜ ì—…ë¬´ íš¨ìœ¨ì„±ì„ ë„˜ì–´, íŒ€ ì „ì²´ì˜ ìƒì‚°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ ì„¤ê³„í•´ ì£¼ê¸¸ ê¸°ëŒ€í•©ë‹ˆë‹¤."
                ]
            }
        };

        function resetFeedbackTab() {
            document.getElementById('input-str').value = '';
            document.getElementById('input-imp').value = '';
            document.getElementById('input-gro').value = '';
            document.getElementById('section-evidence').style.display = 'none';
            document.getElementById('final-feedback-text').value = '';
            
            selectedEvidence = { str: '', imp: '', gro: '' };
            ['str', 'imp', 'gro'].forEach(key => {
                document.getElementById('evidence-' + key + '-text').innerText = '';
                document.getElementById('box-' + key).classList.remove('selected');
                document.getElementById('btn-sel-' + key).innerText = 'ì„ íƒ';
            });
        }

        // ì…ë ¥ í…ìŠ¤íŠ¸ì—ì„œ í‚¤ì›Œë“œë¥¼ ì°¾ì•„ í•´ë‹¹í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì˜ ë¬¸ì¥ì„ ë°˜í™˜
        function getContextEvidence(inputText, type) {
            const member = teamDB[currentMemberKey];
            if (!member) return "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";

            // 1. ì…ë ¥ í…ìŠ¤íŠ¸ì—ì„œ í‚¤ì›Œë“œ ê°ì§€ (Dictionary ë§¤ì¹­)
            let matchedCategory = null;
            for (const cat in feedbackDictionary) {
                if (feedbackDictionary[cat].keywords.some(k => inputText.includes(k))) {
                    matchedCategory = cat;
                    break;
                }
            }

            // 2. ë§¤ì¹­ëœ ì¹´í…Œê³ ë¦¬ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ë¬¸ì¥ í’€ ì‚¬ìš©
            if (matchedCategory) {
                const pool = feedbackDictionary[matchedCategory][type];
                if (pool && pool.length > 0) {
                    return pool[Math.floor(Math.random() * pool.length)];
                }
            }

            // 3. ë§¤ì¹­ ì•ˆë˜ë©´ ê¸°ì¡´ì˜ ë°ì´í„° ê¸°ë°˜ ëœë¤ ë¬¸ì¥ (Fallback)
            if (type === 'str') {
                return [
                    `ìƒìœ„ 5%ì— í•´ë‹¹í•˜ëŠ” '${member.coreValues[0].name}' ì ìˆ˜(${member.coreValues[0].score}ì )ê°€ ì´ë¥¼ ë’·ë°›ì¹¨í•©ë‹ˆë‹¤.`,
                    `ì˜¬í•´ ë‹¬ì„±í•œ '${member.kpiDesc}' ì„±ê³¼ì™€ë„ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê°•ì ì…ë‹ˆë‹¤.`,
                    `ë™ë£Œ í‰ê°€ì—ì„œë„ ì´ ë¶€ë¶„ì´ êµ¬ì„±ì›ì˜ ê°€ì¥ í° ì¥ì ìœ¼ë¡œ ì–¸ê¸‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.`
                ][Math.floor(Math.random() * 3)];
            } else if (type === 'imp') {
                const lowCV = member.coreValues.reduce((min, cur) => cur.score < min.score ? cur : min);
                return [
                    `í•µì‹¬ê°€ì¹˜ ì¤‘ '${lowCV.name}' í•­ëª©ì˜ ì ìˆ˜ê°€ ${lowCV.score}ì ìœ¼ë¡œ, ê°œì„ ì˜ ì—¬ì§€ê°€ ë°ì´í„°ë¡œ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤.`,
                    `ì´ ë¶€ë¶„ë§Œ ë³´ì™„ëœë‹¤ë©´ ì°¨ê¸° '${member.goalRole}' ì—­í•  ìˆ˜í–‰ì— í° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.`,
                    `ì—…ë¬´ ë‹¬ì„±ë„ì— ë¹„í•´ ì •ì„±ì  í‰ê°€ í•­ëª©ì—ì„œ ë‹¤ì†Œ ì•„ì‰¬ìš´ ì§€í‘œê°€ í™•ì¸ë©ë‹ˆë‹¤.`
                ][Math.floor(Math.random() * 3)];
            } else { // gro
                return [
                    `í–¥í›„ '${member.goalRole}'ë¡œ ì„±ì¥í•˜ê¸° ìœ„í•´ ê¼­ í•„ìš”í•œ ì—­ëŸ‰ì…ë‹ˆë‹¤.`,
                    `í˜„ì¬ ì„¤ì •í•œ '${member.compGoals[0]}' ëª©í‘œ ë‹¬ì„±ì„ í†µí•´ ì´ ì—­ëŸ‰ì„ ê°•í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
                    `ì¥ê¸°ì ìœ¼ë¡œ ì¡°ì§ì˜ '${member.bizGoals[0]}' ëª©í‘œ ë‹¬ì„±ì— ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ë°©í–¥ì…ë‹ˆë‹¤.`
                ][Math.floor(Math.random() * 3)];
            }
        }

        function initAiEvidenceSection() {
            if(!currentMemberKey) return;
            regenerateEvidence('str');
            regenerateEvidence('imp');
            regenerateEvidence('gro');
            document.getElementById('section-evidence').style.display = 'block';
            document.getElementById('section-evidence').scrollIntoView({ behavior: 'smooth' });
        }

        function regenerateEvidence(type) {
            const inputId = 'input-' + type;
            const inputText = document.getElementById(inputId).value;
            const text = getContextEvidence(inputText, type);
            
            document.getElementById('evidence-' + type + '-text').innerText = text;
            
            // ì´ˆê¸°í™”
            selectedEvidence[type] = '';
            document.getElementById('box-' + type).classList.remove('selected');
            document.getElementById('btn-sel-' + type).innerText = 'ì„ íƒ';
            generateFinalFeedback(); 
        }

        function toggleSelectEvidence(type) {
            const box = document.getElementById('box-' + type);
            const btn = document.getElementById('btn-sel-' + type);
            const text = document.getElementById('evidence-' + type + '-text').innerText;

            if (selectedEvidence[type]) {
                selectedEvidence[type] = '';
                box.classList.remove('selected');
                btn.innerText = 'ì„ íƒ';
            } else {
                selectedEvidence[type] = text;
                box.classList.add('selected');
                btn.innerText = 'ì„ íƒ ì·¨ì†Œ';
            }
            generateFinalFeedback();
        }

        function setTone(type, value, element) {
            toneProfile[type] = value;
            const parent = element.parentElement;
            Array.from(parent.children).forEach(child => child.classList.remove('selected'));
            element.classList.add('selected');
            generateFinalFeedback();
        }

        function generateFinalFeedback() {
            const strInput = document.getElementById('input-str').value.trim();
            const impInput = document.getElementById('input-imp').value.trim();
            const groInput = document.getElementById('input-gro').value.trim();

            if(!strInput && !impInput && !groInput) {
                document.getElementById('final-feedback-text').value = '';
                return;
            }

            let sentences = [];

            // 1. ì˜¤í”„ë‹
            if (toneProfile.directness === 'direct') {
                sentences.push(`ì˜¬í•´ ì„±ê³¼ì— ëŒ€í•œ í”¼ë“œë°±ì„ ì „ë‹¬í•©ë‹ˆë‹¤.`);
            } else {
                sentences.push(`ì˜¬ í•œ í•´, íŒ€ì„ ìœ„í•´ í—Œì‹ í•´ ì£¼ì…”ì„œ ì •ë§ ê³ ë§™ìŠµë‹ˆë‹¤.`);
            }

            // 2. ê°•ì 
            if (strInput) {
                let s = `ë¨¼ì €, ${strInput}`; 
                if (selectedEvidence.str) s += ` ì‹¤ì œë¡œ ${selectedEvidence.str}`;
                sentences.push(s);
            }

            // 3. ì „í™˜ & ë³´ì™„
            if (impInput) {
                if (toneProfile.directness === 'direct') sentences.push(`ë‹¤ë§Œ, ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ë„ í™•ì¸ë©ë‹ˆë‹¤.`);
                else sentences.push(`ë” í›Œë¥­í•œ ì „ë¬¸ê°€ë¡œ ì„±ì¥í•˜ê¸° ìœ„í•´, ì¡°ê¸ˆ ì•„ì‰¬ìš´ ë¶€ë¶„ë„ ì´ì•¼ê¸°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.`);
                
                let i = `${impInput}`;
                if (selectedEvidence.imp) i += ` ${selectedEvidence.imp}`;
                sentences.push(i);
            }

            // 4. ì„±ì¥
            if (groInput) {
                let g = `ì•ìœ¼ë¡œëŠ” ${groInput}`;
                if (selectedEvidence.gro) g += ` ${selectedEvidence.gro}`;
                sentences.push(g);
            }

            // 5. í´ë¡œì§•
            if (toneProfile.focus === 'task') {
                sentences.push(`ìœ„ ë‚´ìš©ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì‹¤í–‰ ê³„íš(Action Plan)ì„ ì„¸ì›Œ ë‹¤ìŒ ë¯¸íŒ… ë•Œ ë…¼ì˜í•©ì‹œë‹¤.`);
            } else {
                sentences.push(`ì–¸ì œë“  ë„ì›€ì´ í•„ìš”í•˜ë©´ í¸í•˜ê²Œ ë§í•´ì£¼ì„¸ìš”. ${teamDB[currentMemberKey].job}ë¡œì„œì˜ ë©‹ì§„ ì„±ì¥ì„ í•­ìƒ ì‘ì›í•©ë‹ˆë‹¤.`);
            }

            document.getElementById('final-feedback-text').value = sentences.join(" ");
        }

    </script>
</body>
</html>
