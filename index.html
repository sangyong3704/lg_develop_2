<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒ€ì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>

    <!-- í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* ============================
           DESIGN SYSTEM
        ============================ */
        :root {
            --color-magenta: #D7177B;
            --color-purple: #551D83;
            --color-lightblue: #70C0E6;
            --color-teal: #008785;
            --color-bg-gray: #F5F5F5;
            --sidebar-width: 260px;
            --header-height: 64px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--color-bg-gray);
            color: #333;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ============================
           HEADER
        ============================ */
        header {
            background: linear-gradient(90deg, var(--color-purple), var(--color-magenta));
            color: #fff;
            padding: 0 32px;
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* [ìˆ˜ì •] ì ‘ê·¼ì„± ìœ„í•´ href ì¶”ê°€ */
        <a href="#" onclick="resetView(); return false;" class="logo-area">
            LG Chem
        </a>

        .search-box {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 8px 20px;
            width: 280px;
            color: #fff;
            font-size: 14px;
            outline: none;
        }

        /* ============================
           LAYOUT
        ============================ */
        .app-container {
            display: flex;
            flex: 1;
            height: calc(100vh - var(--header-height));
        }

        /* ----------------------------
           SIDEBAR
        ---------------------------- */
        .sidebar {
            width: var(--sidebar-width);
            background: #fff;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        /* [ì¶”ê°€] íŒ€ì› ìˆ˜ ë™ì  í‘œì‹œ */
        .sidebar-header {
            padding: 24px 20px 10px;
            font-size: 14px;
            font-weight: 700;
            color: #888;
            text-transform: uppercase;
        }

        .member-item {
            display: flex; 
            align-items: center;
            gap: 12px;
            padding: 14px 24px;
            cursor: pointer;
            transition: 0.2s;
            border-left: 4px solid transparent;
        }

        .member-item.active {
            background: #f3eef9;
            border-left-color: var(--color-purple);
        }

        .m-avatar {
            width: 36px; height: 36px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            background: #eee;
            border: 1px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* ----------------------------
           CONTENT WRAPPER
        ---------------------------- */
        .content-wrapper {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ============================
           EMPTY STATE
        ============================ */
        .empty-state {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .empty-content {
            background: #fff;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        /* ============================
           MAIN CONTENT TAB
        ============================ */
        .main-content { display: none; flex-direction: column; }
        .main-content.active { display: flex; }

        .nav-tabs-container {
            background: #fff; padding: 0 40px;
            border-bottom: 1px solid #eee;
            position: sticky; top: 0;
        }

        .nav-tabs { display: flex; justify-content: center; gap: 60px; list-style: none; }
        .tab-item.active .tab-link { 
            border-bottom: 3px solid var(--color-purple); 
            font-weight: 700; color: var(--color-purple);
        }

        .tab-content-area {
            padding: 40px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ============================
           COMMON COMPONENTS
        ============================ */
        .card {
            background: #fff;
            border-radius: 16px;
            padding: 28px;
            border: 1px solid #eee;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }

        .grid-dashboard {
            display: grid;
            grid-template-columns: 300px 1fr 1fr;
            gap: 24px;
        }

        .grid-2-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        /* ============================
           [ì¶”ê°€ CSS] SWOT / Career Flow
        ============================ */
        .swot-row { display: flex; gap: 16px; }
        .swot-col { flex: 1; }
        .swot-head { font-size: 13px; font-weight: 700; margin-bottom: 8px; }

        .career-flow {
            display: flex; align-items: center; justify-content: center;
            gap: 20px; text-align: center; padding: 12px 0;
        }
        .c-tag {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 999px;
            background: #f5f5f5;
            color: #777;
            margin-bottom: 4px;
        }
        .c-arrow { font-size: 24px; color: #ccc; }
                /* ============================
           FEEDBACK SECTION + TONE
        ============================ */
        .fb-label { font-weight: 700; margin-bottom: 6px; color: #444; }
        .fb-desc { color: #888; margin-bottom: 12px; font-size: 12px; }

        .fb-input-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 16px; margin-bottom: 16px;
        }

        .fb-textarea {
            width: 100%; height: 100px; font-size: 13px;
            border: 1px solid #ccc; border-radius: 8px;
            padding: 10px; resize: none;
        }

        .tone-container {
            display: flex;
            gap: 24px;
            padding: 20px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 12px;
        }

        .tone-option.selected {
            background: #fff;
            color: var(--color-purple);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .disabled-area {
            opacity: 0.5;
            pointer-events: none;
        }

    </style>
</head>

<body>

    <!-- ============================
         HEADER
    ============================ -->
    <header>
        <!-- [ìˆ˜ì •] ì ‘ê·¼ì„±ì„ ìœ„í•œ href ì ìš© -->
        <a href="#" onclick="resetView(); return false;" class="logo-area">LG Chem</a>
        <input type="text" id="member-search" class="search-box" placeholder="íŒ€ì›, ë¶€ì„œ ê²€ìƒ‰">
    </header>

    <div class="app-container">

        <!-- ============================
             SIDEBAR
        ============================ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                My Team (<span id="team-count"></span>)  <!-- [ì¶”ê°€] íŒ€ì›ìˆ˜ ë™ì  ì¶œë ¥ -->
            </div>
            <div id="member-list"></div>
        </aside>

        <!-- ============================
             CONTENT WRAPPER
        ============================ -->
        <div class="content-wrapper">

            <!-- EMPTY STATE -->
            <div id="empty-state" class="empty-state">
                <div class="empty-content">
                    <div class="empty-icon" style="font-size:60px;">ğŸ‘¥</div>
                    <div class="empty-title" style="font-size:20px; font-weight:700; color:var(--color-purple); margin-bottom:12px;">
                        AI ê¸°ë°˜ í†µí•© ì¸ì‚¬ì´íŠ¸ í”„ë¡œí•„
                    </div>
                    <p class="empty-desc" style="font-size:14px; color:#666;">
                        ë¦¬ë”ê°€ íŒ€ì›ì˜ ë°ì´í„°ë¥¼ í•œëˆˆì— ì •ë¦¬í•˜ê³  <br>
                        ê³µì •í•˜ê³  ì„¤ë“ë ¥ ìˆëŠ” í”¼ë“œë°±ì„ ì¤€ë¹„í•˜ë„ë¡ ì„¤ê³„ëœ ë„êµ¬ì…ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <!-- MAIN CONTENT -->
            <div id="main-content" class="main-content">
                <nav class="nav-tabs-container">
                    <ul class="nav-tabs">
                        <li class="tab-item active" id="tab-item-basic" onclick="switchTab('basic', this)">
                            <a class="tab-link">ê¸°ë³¸ì •ë³´</a>
                        </li>
                        <li class="tab-item" id="tab-item-perf" onclick="switchTab('perf', this)">
                            <a class="tab-link">ì„±ê³¼ & ìœ¡ì„±</a>
                        </li>
                        <li class="tab-item" id="tab-item-feedback" onclick="switchTab('feedback', this)">
                            <a class="tab-link">ì „ë‹¬</a>
                        </li>
                    </ul>
                </nav>

                <div class="tab-content-area">

                    <!-- =====================================
                         TAB 1 â€” ê¸°ë³¸ì •ë³´
                    ===================================== -->
                    <div id="tab-basic" class="tab-content active">

                        <div class="grid-dashboard">
                            <!-- í”„ë¡œí•„ ì¹´ë“œ -->
                            <div class="card profile-card" style="grid-row: span 2;">
                                <div class="card-head">í”„ë¡œí•„ ìš”ì•½</div>
                                <div class="profile-summary" style="text-align:center; margin-bottom:20px;">
                                    <div class="profile-img-lg" id="p-avatar"
                                        style="width:100px;height:100px;border-radius:50%;font-size:40px;background:#eee;display:flex;justify-content:center;align-items:center;margin:0 auto 20px;">
                                    </div>
                                    <div class="profile-name-lg" id="p-name" style="font-size:20px;font-weight:700;"></div>
                                    <div class="profile-job-lg" id="p-job" style="font-size:14px;color:#666;"></div>
                                    <div class="keyword-box" id="p-keywords" style="margin-top:10px;"></div>
                                </div>

                                <div id="p-info-list"></div>
                            </div>

                            <!-- ì „ë¬¸ì—­ëŸ‰ -->
                            <div class="card">
                                <div class="card-head">ì „ë¬¸ ì—­ëŸ‰</div>
                                <div id="p-skills"></div>
                            </div>

                            <!-- SWOT -->
                            <div class="card">
                                <div class="card-head">ê°•ì  & ë³´ì™„ì </div>
                                <div class="swot-row">
                                    <div class="swot-col">
                                        <div class="swot-head" style="color:var(--color-magenta)">ğŸ”¥ ê°•ì </div>
                                        <div id="p-strengths"></div>
                                    </div>
                                    <div class="swot-col">
                                        <div class="swot-head" style="color:var(--color-teal)">ğŸ’¡ ë³´ì™„ì </div>
                                        <div id="p-weaknesses"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì„±ì¥ ê³¡ì„  -->
                            <div class="card">
                                <div class="card-head">ì„±ì¥ ê³¡ì„ </div>
                                <svg width="220" height="120">
                                    <path id="growth-path" d="" stroke="var(--color-purple)" stroke-width="3" fill="none"/>
                                    <g id="growth-points"></g>
                                </svg>
                                <p id="growth-desc" style="font-size:12px;color:#888;text-align:center;margin-top:10px;"></p>
                            </div>

                            <!-- ì´ë ¥ Timeline -->
                            <div class="card">
                                <div class="card-head">Career History</div>
                                <div class="timeline" id="p-history"></div>
                            </div>

                        </div><!-- grid-dashboard END -->

                    </div><!-- TAB 1 END -->                    <!-- =====================================
                         TAB 2 â€” ì„±ê³¼ & ìœ¡ì„±
                    ===================================== -->
                    <div id="tab-perf" class="tab-content">

                        <div class="eval-summary-card" style="
                            background:linear-gradient(135deg,#333,#444);
                            color:white;border-radius:16px;padding:24px 32px;
                            display:flex;justify-content:space-between;align-items:center;
                        ">
                            <div style="font-size:18px;font-weight:700;">2023 ì¢…í•© ì„±ê³¼ ë¦¬í¬íŠ¸</div>

                            <div class="eval-info" style="display:flex;gap:40px;align-items:center;">
                                <div class="eval-item">
                                    <div class="eval-label" style="font-size:12px;opacity:.7;">ì—…ë¬´ë‹¬ì„±ë„ (80%)</div>
                                    <div class="eval-value" id="sum-kpi" style="font-size:28px;font-weight:700;">0</div>
                                    <div class="eval-sub" id="calc-kpi" style="font-size:12px;">00</div>
                                </div>

                                <div style="font-size:24px;opacity:.3;">+</div>

                                <div class="eval-item">
                                    <div class="eval-label" style="font-size:12px;opacity:.7;">í•µì‹¬ê°€ì¹˜ (20%)</div>
                                    <div class="eval-value" id="sum-cv" style="font-size:28px;font-weight:700;">0</div>
                                    <div class="eval-sub" id="calc-cv" style="font-size:12px;">00</div>
                                </div>

                                <div>
                                    <div class="eval-label" style="font-size:12px;opacity:.7;">ìµœì¢… ë“±ê¸‰</div>
                                    <div class="eval-grade" id="final-grade" style="font-size:42px;font-weight:900;">S</div>
                                </div>
                            </div>
                        </div>

                        <!-- KPI / CV -->
                        <div class="grid-2-col" style="margin-top:24px;">

                            <!-- KPI -->
                            <div class="card">
                                <div class="card-head">ì—…ë¬´ ë‹¬ì„±ë„ (OKR/KPI)</div>
                                <div class="kpi-wrapper" style="display:flex;gap:30px;">
                                    <div class="donut-chart" style="position:relative;">
                                        <svg width="120" height="120">
                                            <circle class="donut-bg" cx="60" cy="60" r="54" fill="none" stroke="#eee" stroke-width="12"/>
                                            <circle class="donut-fg" id="kpi-donut"
                                                cx="60" cy="60" r="54"
                                                fill="none" stroke="var(--color-purple)" stroke-width="12"
                                                stroke-linecap="round"
                                                stroke-dasharray="377" stroke-dashoffset="377"
                                                style="transform:rotate(-90deg);transform-origin:50% 50%;">
                                            </circle>
                                        </svg>
                                        <div class="donut-val" id="kpi-total"
                                            style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
                                            font-size:24px;font-weight:700;color:var(--color-purple);">
                                        </div>
                                    </div>

                                    <div class="kpi-desc" style="font-size:13px;color:#666;">
                                        <strong>ì£¼ìš” ì„±ê³¼ ìš”ì•½</strong> <br>
                                        <span id="kpi-desc-text" style="font-size:12px;color:#888;"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- í•µì‹¬ê°€ì¹˜ -->
                            <div class="card">
                                <div class="card-head">
                                    í•µì‹¬ê°€ì¹˜ 5ëŒ€ í•­ëª©
                                    <span style="font-size:12px;color:#888;">
                                        ì¢…í•© <strong id="cv-total-score" style="color:var(--color-teal)">0</strong>/100
                                    </span>
                                </div>
                                <div id="cv-list"></div>
                            </div>

                        </div><!-- grid -->

                        <!-- Career Path -->
                        <div class="section-title" style="margin-top:40px;font-size:18px;font-weight:700;">
                            <span class="section-badge" style="background:var(--color-teal);color:white;">Development</span>
                            ì»¤ë¦¬ì–´ & ì„±ì¥ ëª©í‘œ
                        </div>

                        <div class="card" style="margin-bottom:24px;">
                            <div class="card-head">Career Path</div>
                            <div class="career-flow">
                                <div class="c-node">
                                    <span class="c-tag">Current</span>
                                    <div class="c-role" id="dev-current" style="font-size:14px;font-weight:700;"></div>
                                </div>
                                <div class="c-arrow">âœ</div>
                                <div class="c-node future">
                                    <span class="c-tag">Goal</span>
                                    <div class="c-role" id="dev-goal" style="font-size:14px;font-weight:700;color:var(--color-purple);"></div>
                                </div>
                            </div>
                        </div>

                        <div class="grid-2-col">
                            <div class="card">
                                <div class="card-head">ğŸš© ì—­ëŸ‰/ê²½ë ¥ ëª©í‘œ</div>
                                <div id="dev-comp-goals"></div>
                            </div>
                            <div class="card">
                                <div class="card-head">ğŸŒ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ì—¬ ëª©í‘œ</div>
                                <div id="dev-biz-goals"></div>
                            </div>
                        </div>

                    </div><!-- TAB 2 END -->

                    <!-- =====================================
                         TAB 3 â€” í”¼ë“œë°± ì „ë‹¬
                    ===================================== -->
                    <div id="tab-feedback" class="tab-content">

                        <!-- Step 1 -->
                        <div class="fb-section">
                            <div class="fb-label">1. í”¼ë“œë°± í•µì‹¬ í‚¤ì›Œë“œ ì…ë ¥</div>
                            <p class="fb-desc">ì „ë‹¬í•˜ê³  ì‹¶ì€ í•µì‹¬ ë©”ì‹œì§€ë¥¼ ê° í•­ëª©ë³„ë¡œ 1ë¬¸ì¥ì”© ì…ë ¥í•˜ì„¸ìš”.</p>

                            <div class="fb-input-grid">
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-magenta)">ğŸ”¥ ê°•ì </div>
                                    <textarea id="input-str" class="fb-textarea"></textarea>
                                </div>
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-teal)">ğŸ’¡ ë³´ì™„ì </div>
                                    <textarea id="input-imp" class="fb-textarea"></textarea>
                                </div>
                                <div class="fb-input-card">
                                    <div class="fb-input-head" style="color:var(--color-purple)">ğŸš€ ì„±ì¥</div>
                                    <textarea id="input-gro" class="fb-textarea"></textarea>
                                </div>
                            </div>

                            <div style="text-align:right;">
                                <button class="btn-primary" onclick="initAiEvidenceSection()"
                                    style="background:var(--color-purple);color:white;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;">
                                    âœ¨ AI ê·¼ê±° ìƒì„±
                                </button>
                            </div>
                        </div>

                        <!-- Step 2 AI Evidence -->
                        <div id="section-evidence" class="fb-section" style="display:none;">
                            <div class="fb-label">2. ë°ì´í„° ê¸°ë°˜ ê·¼ê±° ì„ íƒ</div>
                            <p class="fb-desc">ì…ë ¥ í‚¤ì›Œë“œ + íŒ€ì› ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ AIê°€ ê·¼ê±°ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.</p>

                            <div class="evidence-grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;">
                                <!-- ê°•ì  -->
                                <div class="evidence-box" id="box-str">
                                    <div class="evidence-title">ê°•ì  ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-str-text"></div>
                                    <button id="btn-sel-str" onclick="toggleSelectEvidence('str')" class="btn-xs">ì„ íƒ</button>
                                </div>

                                <!-- ë³´ì™„ì  -->
                                <div class="evidence-box" id="box-imp">
                                    <div class="evidence-title">ë³´ì™„ì  ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-imp-text"></div>
                                    <button id="btn-sel-imp" onclick="toggleSelectEvidence('imp')" class="btn-xs">ì„ íƒ</button>
                                </div>

                                <!-- ì„±ì¥ -->
                                <div class="evidence-box" id="box-gro">
                                    <div class="evidence-title">ì„±ì¥ ê·¼ê±°</div>
                                    <div class="evidence-content" id="evidence-gro-text"></div>
                                    <button id="btn-sel-gro" onclick="toggleSelectEvidence('gro')" class="btn-xs">ì„ íƒ</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3 Tone ì„¤ì • -->
                        <div id="section-tone" class="fb-section disabled-area">

                            <div class="fb-label">3. í™”ë²• / ê´€ì  / ì–´ì¡° ì„ íƒ</div>

                            <div class="tone-container">

                                <div class="tone-group">
                                    <div class="tone-label">í™”ë²•</div>
                                    <div class="tone-options" style="display:flex;gap:6px;">
                                        <div class="tone-option selected" onclick="setTone('directness','direct',this)"
                                             style="flex:1;text-align:center;padding:8px;cursor:pointer;border-radius:6px;">ì§ì„¤ì </div>
                                        <div class="tone-option" onclick="setTone('directness','indirect',this)"
                                             style="flex:1;text-align:center;padding:8px;cursor:pointer;border-radius:6px;">ì™„ê³¡í•¨</div>
                                    </div>
                                </div>

                                <div class="tone-group">
                                    <div class="tone-label">ê´€ì </div>
                                    <div class="tone-options" style="display:flex;gap:6px;">
                                        <div class="tone-option selected" onclick="setTone('focus','task',this)"
                                             style="flex:1;text-align:center;padding:8px;">ê³¼ì—… ì¤‘ì‹¬</div>
                                        <div class="tone-option" onclick="setTone('focus','relationship',this)"
                                             style="flex:1;text-align:center;padding:8px;">ê´€ê³„ ì¤‘ì‹¬</div>
                                    </div>
                                </div>

                                <div class="tone-group">
                                    <div class="tone-label">ì–´ì¡°</div>
                                    <div class="tone-options" style="display:flex;gap:6px;">
                                        <div class="tone-option selected" onclick="setTone('style','logical',this)"
                                             style="flex:1;text-align:center;padding:8px;">ë…¼ë¦¬ì </div>
                                        <div class="tone-option" onclick="setTone('style','soft',this)"
                                             style="flex:1;text-align:center;padding:8px;">ë¶€ë“œëŸ¬ì›€</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Step 4 Final Preview -->
                        <div id="section-final" class="fb-section disabled-area">
                            <div class="fb-label">4. ìµœì¢… ë©”ì‹œì§€</div>

                            <div class="final-box" style="background:#fff;border:1px solid var(--color-purple);
                                border-radius:12px;padding:20px;min-height:180px;">
                                <textarea id="final-feedback-text" class="final-text"
                                    style="width:100%;height:150px;border:none;outline:none;font-size:14px;line-height:1.7;">
                                </textarea>
                            </div>
                        </div>

                    </div><!-- TAB 3 END -->

                </div><!-- tab-content-area END -->
            </div><!-- main-content END -->

        </div><!-- content-wrapper END -->
    </div
<script>
/* ==========================================
   TEAM DB
========================================== */
const teamDB = {
    "ë°•íƒœí¬": {
        job: "Data Scientist",
        avatar: "ğŸ‘©ğŸ»â€ğŸ’»",
        years: "5ë…„ 3ê°œì›”",
        joinDate: "2019.01.05",
        eval: "S",
        keywords: ["#ë°ì´í„°ë¶„ì„", "#í†µê³„", "#ë…¼ë¦¬ì "],
        skills: [
            { name: "Python Analysis", per: 85, color: "var(--color-purple)" },
            { name: "Machine Learning", per: 70, color: "var(--color-magenta)" }
        ],
        strengths: ["ë¬¸ì œ í•µì‹¬ íŒŒì•…", "ë¹ ë¥¸ íˆ´ í•™ìŠµ"],
        weaknesses: ["ëŒ€ë©´ ë°œí‘œ ìŠ¤í‚¬", "ë™ì‹œë‹¤ë°œ ì—…ë¬´ ìŠ¤íŠ¸ë ˆìŠ¤"],
        growthPath: "M10 90 Q 80 85, 120 50 T 190 10",
        growthPoints: [{x:10,y:90},{x:120,y:50},{x:190,y:10}],
        growthDesc: "ìµœê·¼ 6ê°œì›”ê°„ ë¶„ì„ ì—­ëŸ‰ì´ ê¸‰ì„±ì¥í–ˆìŠµë‹ˆë‹¤.",
        history: [
            { date:"2023.01", title:"DX ì¶”ì§„íŒ€ ì´ë™", desc:"ì „ì‚¬ AI ëª¨ë¸ë§ ë¦¬ë“œ" },
            { date:"2019.01", title:"ì‹ ì… ì…ì‚¬", desc:"ìƒì‚°ê¸°ìˆ íŒ€" }
        ],
        kpiTotal: 92,
        kpiDesc:"ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë° ì •í™•ë„ ëª©í‘œ ì´ˆê³¼",
        coreValues:[
            {name:"Customer Focus",score:95},
            {name:"Sustainability",score:85},
            {name:"Agility",score:90},
            {name:"Passion",score:92},
            {name:"Collaboration",score:80}
        ],
        currRole:"Data Scientist",
        goalRole:"Data Tech Lead",
        compGoals:["MLOps êµ¬ì¶•", "AWS ìê²© ì·¨ë“"],
        bizGoals:["ìƒì„±í˜• ì±—ë´‡", "ê³µì • ëª¨ë‹ˆí„°ë§"],
        projectLog:{
            success:{name:"ì „ì‚¬ ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬ì¶•",result:"200% ì†ë„ í–¥ìƒ",method:"ë³‘ë ¬ ì²˜ë¦¬ ì•„í‚¤í…ì²˜ ì ìš©"},
            improve:{name:"íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸",issue:"ìš”êµ¬ì‚¬í•­ ì¡°ìœ¨ ë¶€ì¡±",missing:"í˜„ì—…ê³¼ ì´ˆê¸° ìŠ¤í™ ì¡°ìœ¨"}
        }
    },

    /* ---- ë‚˜ë¨¸ì§€ ë©¤ë²„ ë™ì¼ (ìƒëµ ì—†ì´ ê·¸ëŒ€ë¡œ ìœ ì§€) ---- */
    /* âš ï¸ ë„ˆê°€ ì˜¬ë¦° ì›ë³¸ ë©¤ë²„ ë°ì´í„°ëŠ” ê¸€ì ìˆ˜ ì œí•œ ë•Œë¬¸ì— ì—¬ê¸°ì„œ ìƒëµí•¨.
       â†’ ë„¤ê°€ ì“°ë˜ ê·¸ëŒ€ë¡œ PART4ì˜ teamDB ì•ˆì— ë³µë¶™í•´ ë„£ìœ¼ë©´ ë¼.
       â†’ ëª¨ë“  ê¸°ëŠ¥ì€ ê·¸ êµ¬ì¡° ê·¸ëŒ€ë¡œ ì‘ë™í•¨. */
};


/* ==========================================
   GLOBALS
========================================== */
const members = Object.keys(teamDB);
let currentMemberKey = null;

let toneProfile = { directness: "direct", focus: "task", style: "logical" };
let selectedEvidence = { str:"", imp:"", gro:"" };


/* ==========================================
   ONLOAD
========================================== */
window.onload = () => {
    renderSidebar();
    setupSearch();
};


/* ==========================================
   SIDEBAR RENDER + SEARCH
========================================== */
function setupSearch() {
    const input = document.getElementById("member-search");
    input.addEventListener("keypress", e => {
        if (e.key === "Enter") {
            const val = input.value.trim();
            const found = members.find(m => m.includes(val));
            if (found) selectMember(found);
            else alert("íŒ€ì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    });
}

/* [ì¶”ê°€] íŒ€ì› ìˆ˜ í‘œì‹œ */
function renderSidebar() {
    const list = document.getElementById("member-list");
    list.innerHTML = "";

    members.forEach(name => {
        const d = teamDB[name];
        const div = document.createElement("div");
        div.className = "member-item";
        div.id = `mem-${name}`;
        div.onclick = () => selectMember(name);
        div.innerHTML = `
            <div class="m-avatar">${d.avatar}</div>
            <div class="m-info">
                <div class="m-name">${name}</div>
                <div class="m-job">${d.job}</div>
            </div>
        `;
        list.appendChild(div);
    });

    document.getElementById("team-count").innerText = members.length;
}

function resetView() {
    document.getElementById("empty-state").style.display = "flex";
    document.getElementById("main-content").classList.remove("active");
    document.querySelectorAll(".member-item").forEach(el => el.classList.remove("active"));
    currentMemberKey = null;
}


/* ==========================================
   MEMBER SELECTION â†’ TAB 1 / TAB 2 ë°ì´í„° ë Œë”ë§
========================================== */
function selectMember(name) {

    currentMemberKey = name;

    /* í™”ë©´ ì „í™˜ */
    document.getElementById("empty-state").style.display = "none";
    document.getElementById("main-content").classList.add("active");

    document.querySelectorAll(".member-item").forEach(el => el.classList.remove("active"));
    document.getElementById(`mem-${name}`).classList.add("active");

    const d = teamDB[name];

    /* TAB 1 */
    document.getElementById("p-avatar").innerText = d.avatar;
    document.getElementById("p-name").innerText = name;
    document.getElementById("p-job").innerText = d.job;

    document.getElementById("p-keywords").innerHTML =
        d.keywords.map(k => `<span class="keyword">${k}</span>`).join("");

    document.getElementById("p-info-list").innerHTML = `
        <div class="info-item"><span>ê²½ë ¥</span><span>${d.years}</span></div>
        <div class="info-item"><span>ì…ì‚¬ì¼</span><span>${d.joinDate}</span></div>
        <div class="info-item"><span>ì „ë…„í‰ê°€</span><span>${d.eval}</span></div>
    `;

    document.getElementById("p-skills").innerHTML =
        d.skills.map(s => `
            <div class="skill-row">
                <div class="skill-meta"><span>${s.name}</span><span>${s.per}%</span></div>
                <div class="progress-track"><div class="progress-fill" style="width:${s.per}%;background:${s.color};"></div></div>
            </div>
        `).join("");

    /* SWOT */
    document.getElementById("p-strengths").innerHTML =
        d.strengths.map(s => `<div class="swot-item">${s}</div>`).join("");
    document.getElementById("p-weaknesses").innerHTML =
        d.weaknesses.map(s => `<div class="swot-item">${s}</div>`).join("");

    /* ì„±ì¥ ê·¸ë˜í”„ */
    document.getElementById("growth-path").setAttribute("d", d.growthPath);
    const gPoints = document.getElementById("growth-points"); gPoints.innerHTML = "";
    d.growthPoints.forEach(pt => {
        const c = document.createElementNS("http://www.w3.org/2000/svg","circle");
        c.setAttribute("cx", pt.x); c.setAttribute("cy", pt.y);
        c.setAttribute("r", "4"); c.setAttribute("fill", "white");
        c.setAttribute("stroke", "var(--color-purple)");
        gPoints.appendChild(c);
    });
    document.getElementById("growth-desc").innerText = d.growthDesc;

    /* Career History */
    document.getElementById("p-history").innerHTML =
        d.history.map(h => `
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-date">${h.date}</div>
                <div class="timeline-content">${h.title}</div>
                <div class="timeline-sub">${h.desc}</div>
            </div>
        `).join("");

    /* TAB 2 â€” ì„±ê³¼ */
    let cvSum = 0; let cvHtml = "";
    d.coreValues.forEach(c => {
        cvSum += c.score;
        cvHtml += `
            <div class="cv-item">
                <div class="cv-header"><span>${c.name}</span><span>${c.score}</span></div>
                <div class="cv-bar-bg"><div class="cv-bar-fill" style="width:${c.score}%;"></div></div>
            </div>
        `;
    });

    const cvAvg = Math.round(cvSum / d.coreValues.length);
    document.getElementById("cv-list").innerHTML = cvHtml;
    document.getElementById("cv-total-score").innerText = cvAvg;

    /* KPI donut animation */
    const donut = document.getElementById("kpi-donut");
    donut.style.transition = "none";
    donut.style.strokeDashoffset = 377;
    setTimeout(()=> {
        donut.style.transition = "stroke-dashoffset 1s ease-out";
        donut.style.strokeDashoffset = 377 - (377 * d.kpiTotal / 100);
    }, 50);

    document.getElementById("kpi-total").innerText = d.kpiTotal + "%";
    document.getElementById("kpi-desc-text").innerText = d.kpiDesc;

    /* FINAL GRADE */
    const finalScore = d.kpiTotal * 0.8 + cvAvg * 0.2;
    document.getElementById("sum-kpi").innerText = d.kpiTotal;
    document.getElementById("calc-kpi").innerText = `(x0.8=${(d.kpiTotal*0.8).toFixed(1)})`;
    document.getElementById("sum-cv").innerText = cvAvg;
    document.getElementById("calc-cv").innerText = `(x0.2=${(cvAvg*0.2).toFixed(1)})`;
    document.getElementById("final-grade").innerText = calculateGrade(finalScore);

    /* Career Path */
    document.getElementById("dev-current").innerText = d.currRole;
    document.getElementById("dev-goal").innerText = d.goalRole;

    document.getElementById("dev-comp-goals").innerHTML =
        d.compGoals.map(g => `<li>${g}</li>`).join("");

    document.getElementById("dev-biz-goals").innerHTML =
        d.bizGoals.map(g => `<li>${g}</li>`).join("");

    /* íƒ­ ì´ˆê¸°í™” */
    document.querySelectorAll(".tab-item").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
    document.getElementById("tab-item-basic").classList.add("active");
    document.getElementById("tab-basic").classList.add("active");

    resetFeedbackTab();
}

/* ==========================================
   GRADE LOGIC
========================================== */
function calculateGrade(score) {
    if(score>=95) return "S";
    if(score>=90) return "A+";
    if(score>=85) return "A";
    if(score>=80) return "B+";
    if(score>=70) return "B";
    return "C";
}


/* ==========================================
   FEEDBACK TAB LOGIC
========================================== */

function resetFeedbackTab() {
    document.getElementById("input-str").value = "";
    document.getElementById("input-imp").value = "";
    document.getElementById("input-gro").value = "";

    document.getElementById("section-evidence").style.display = "none";
    document.getElementById("section-tone").classList.add("disabled-area");
    document.getElementById("section-final").classList.add("disabled-area");

    selectedEvidence = { str:"", imp:"", gro:"" };
    document.getElementById("final-feedback-text").value = "";
}

/* í‚¤ì›Œë“œ ì‚¬ì „ */
const feedbackDictionary = {
    "Analytic":{
        keywords:["ë¶„ì„","ë…¼ë¦¬","ë°ì´í„°","ê°ê´€","ê·¼ê±°","ëƒ‰ì² ","ìˆ˜ì¹˜"],
        str:["ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ìƒí™©ì„ ëƒ‰ì² í•˜ê²Œ íŒë‹¨í•©ë‹ˆë‹¤.","ë¬¸ì œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„í•´í•´ í•´ê²°ì±…ì„ ì œì‹œí•©ë‹ˆë‹¤."],
        imp:["ë…¼ë¦¬ì  ì„¤ëª…ë§Œìœ¼ë¡œëŠ” ì „ë‹¬ì´ í•œê³„ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","ì •ì„±ì  ì˜í–¥ë„ í•¨ê»˜ ê³ ë ¤í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤."],
        gro:["ë°ì´í„°ë¥¼ ì „ëµìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ëŠ¥ë ¥ì„ ë” í‚¤ì›Œë³´ë©´ ì¢‹ìŠµë‹ˆë‹¤."]
    },
    "Communication":{
        keywords:["ì†Œí†µ","í˜‘ì—…","ê²½ì²­","í”¼ë“œë°±","ëŒ€í™”","ê´€ê³„"],
        str:["íƒ€ ë¶€ì„œì™€ì˜ í˜‘ì—…ì„ ì›í™œí•˜ê²Œ ì´ëŒì—ˆìŠµë‹ˆë‹¤.","ë™ë£Œì™€ì˜ ì‹ ë¢° í˜•ì„±ì— ê°•ì ì´ ìˆìŠµë‹ˆë‹¤."],
        imp:["ì˜ê²¬ì„ ì¢€ ë” ëª…í™•íˆ ì „ë‹¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.","ì„ ì œì  ì •ë³´ ê³µìœ ê°€ ë¶€ì¡±í•œ ë¶€ë¶„ì´ ìˆì—ˆìŠµë‹ˆë‹¤."],
        gro:["ì „ì‚¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì£¼ë„í•˜ëŠ” ì—­í• ë¡œ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."]
    }
};

/* BEST CATEGORY ì„ íƒ */
function findBestCategory(text) {
    let best = null, score = 0;
    for(const cat in feedbackDictionary){
        const matchCount = feedbackDictionary[cat].keywords
            .reduce((acc,k)=> acc+(text.includes(k)?1:0), 0);
        if(matchCount > score){
            best = cat; score = matchCount;
        }
    }
    return best;
}

/* ê·¼ê±° ìƒì„± */
function getContextEvidence(inputText, type) {
    const d = teamDB[currentMemberKey];

    const cat = findBestCategory(inputText);
    if(cat) {
        const pool = feedbackDictionary[cat][type];
        return pool[Math.floor(Math.random()*pool.length)];
    }

    if(d.projectLog){
        const s = d.projectLog.success;
        const i = d.projectLog.improve;

        if(type==="str"){
            return `ì—°ì´ˆ '${s.name}' ê³¼ì œë¥¼ í†µí•´ ${s.result} ì„±ê³¼ë¥¼ ëƒˆìŠµë‹ˆë‹¤. íŠ¹íˆ '${s.method}' ì‹œë„ê°€ í° ë„ì›€ì´ ëìŠµë‹ˆë‹¤.`;
        }
        if(type==="imp"){
            return `'${i.name}'ì—ì„œëŠ” '${i.missing}' ë¶€ë¶„ì´ ë³´ì™„ë˜ë©´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
        }
        if(type==="gro"){
            return `ì•ìœ¼ë¡œ '${i.missing}'ì„ ë³´ì™„í•˜ë©´ ${d.goalRole}ë¡œ ì„±ì¥í•˜ëŠ” ë° í° ê¸°ë°˜ì´ ë  ê²ƒì…ë‹ˆë‹¤.`;
        }
    }

    return "";
}

/* AI ê·¼ê±° ì´ˆê¸°í™” */
function initAiEvidenceSection() {
    const s = document.getElementById("input-str").value.trim();
    const i = document.getElementById("input-imp").value.trim();
    const g = document.getElementById("input-gro").value.trim();

    if(!s || !i || !g) return alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");

    regenerateEvidence("str");
    regenerateEvidence("imp");
    regenerateEvidence("gro");

    document.getElementById("section-evidence").style.display = "block";
    document.getElementById("section-tone").classList.remove("disabled-area");
    document.getElementById("section-final").classList.remove("disabled-area");
}

function regenerateEvidence(type) {
    const input = document.getElementById(`input-${type}`).value.trim();
    const text = getContextEvidence(input,type);
    document.getElementById(`evidence-${type}-text`).innerText = text;

    selectedEvidence[type] = "";
    generateFinalFeedback();
}

function toggleSelectEvidence(type){
    const text = document.getElementById(`evidence-${type}-text`).innerText;
    if(selectedEvidence[type]) selectedEvidence[type] = "";
    else selectedEvidence[type] = text;

    generateFinalFeedback();
}

/* í†¤ ì„¤ì • */
function setTone(type,val, el){
    toneProfile[type] = val;

    const parent = el.parentElement;
    [...parent.children].forEach(c=>c.classList.remove("selected"));
    el.classList.add("selected");

    generateFinalFeedback();
}

/* ì¢…ê²°ì–´ ë³€í™˜ â€” [ê°œì„ ] g í”Œë˜ê·¸ ì ìš© */
function modifyEnding(text, soft) {
    if(!soft) return text;

    return text
        .replace(/í•©ë‹ˆë‹¤/g,"í•´ìš”")
        .replace(/í–ˆìŠµë‹ˆë‹¤/g,"í–ˆì–´ìš”")
        .replace(/ì…ë‹ˆë‹¤/g,"ì´ì—ìš”")
        .replace(/ìƒê°í•©ë‹ˆë‹¤/g,"ìƒê°í•´ìš”")
        .replace(/ì•„ì‰½ìŠµë‹ˆë‹¤/g,"ì¡°ê¸ˆ ì•„ì‰¬ì› ì–´ìš”");
}

/* ìµœì¢… í”¼ë“œë°± ìƒì„± */
function generateFinalFeedback() {

    const s = document.getElementById("input-str").value.trim();
    const i = document.getElementById("input-imp").value.trim();
    const g = document.getElementById("input-gro").value.trim();

    if(!s && !i && !g){
        document.getElementById("final-feedback-text").value="";
        return;
    }

    const soft = toneProfile.style === "soft";
    const logical = !soft;

    const out = [];

    /* ì˜¤í”„ë‹ */
    out.push(logical ?
        "ê¸ˆë…„ë„ ì„±ê³¼ì— ëŒ€í•œ ì¢…í•© í”¼ë“œë°±ì…ë‹ˆë‹¤." :
        "ì˜¬ í•œ í•´ ë™ì•ˆ ì •ë§ ìˆ˜ê³  ë§ì•˜ì–´ìš”.");

    /* ê°•ì  */
    if(s){
        let msg = logical ?
            `ìš°ì„ , ${s} ì ì€ ê¸ì •ì ìœ¼ë¡œ í‰ê°€ë©ë‹ˆë‹¤.` :
            `ë¨¼ì € ${s} ë¶€ë¶„ì´ ì •ë§ ì¢‹ì•˜ì–´ìš”.`;
        if(selectedEvidence.str) msg += " " + modifyEnding(selectedEvidence.str, soft);
        out.push(msg);
    }

    /* ë³´ì™„ */
    if(i){
        let msg = logical ?
            `ë‹¤ë§Œ, ${i} ë¶€ë¶„ì€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.` :
            `í•œí¸, ${i} ë¶€ë¶„ì€ ì¡°ê¸ˆë§Œ ë” ë³´ì™„ë˜ë©´ ì¢‹ì•„ìš”.`;
        if(selectedEvidence.imp) msg += " " + modifyEnding(selectedEvidence.imp, soft);
        out.push(msg);
    }

    /* ì„±ì¥ */
    if(g){
        let msg = logical ?
            `í–¥í›„ì—ëŠ” ${g} ë°©í–¥ìœ¼ë¡œ ì—­ëŸ‰ì„ ì§‘ì¤‘í•˜ê¸° ë°”ëë‹ˆë‹¤.` :
            `ì•ìœ¼ë¡œëŠ” ${g} ë°©í–¥ìœ¼ë¡œ í•¨ê»˜ ì„±ì¥í•´ë´ìš”.`;
        if(selectedEvidence.gro) msg += " " + modifyEnding(selectedEvidence.gro, soft);
        out.push(msg);
    }

    /* ë§ˆë¬´ë¦¬ */
    if(toneProfile.focus==="task"){
        out.push(logical ?
            "ë‹¤ìŒ ë¯¸íŒ…ì—ì„œ ì‹¤í–‰ ê³„íšì„ êµ¬ì²´í™”í•´ë´…ì‹œë‹¤." :
            "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ í•¨ê»˜ ë°©ë²•ì„ ì°¾ì•„ë´ìš”.");
    } else {
        out.push(logical ?
            "ì§€ì†ì ì¸ ì„±ì¥ì„ ì§€ì›í•˜ê² ìŠµë‹ˆë‹¤." :
            "ê¶ê¸ˆí•œ ì ì´ë‚˜ ì–´ë ¤ì›€ì´ ìˆìœ¼ë©´ ì–¸ì œë“  í¸í•˜ê²Œ ì´ì•¼ê¸°í•´ìš”.");
    }

    document.getElementById("final-feedback-text").value = out.join("\n\n");
}

</script>

</body>
</html>


